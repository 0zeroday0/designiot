<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="css/vendor.css" type="text/css" />
</head>
<body>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link rel="stylesheet" href="css/vendor.css" />
  <title>设计物联网系统</title>
  <meta name="keywords" content="设计物联网系统,物联网系统设计">
  <meta name="description" content="一份关于如何设计物联网系统的文档">
</head>
<body class="container inner wrap">

</body>
</html>
<div id="TOC">
<ul>
<li><a href="#前言">前言</a></li>
<li><a href="#目标读者">目标读者</a></li>
<li><a href="#介绍">介绍</a></li>
<li><a href="#be-a-geek">Be a Geek</a><ul>
<li><a href="#从html开始">从html开始</a><ul>
<li><a href="#html的helloworld">html的hello,world</a></li>
<li><a href="#调试helloworld">调试hello,world</a></li>
<li><a href="#说说helloworld">说说hello,world</a></li>
<li><a href="#想用中文">想用中文？</a></li>
<li><a href="#其他html标记">其他html标记</a></li>
<li><a href="#美妙之处">美妙之处</a></li>
</ul></li>
<li><a href="#更多">更多</a></li>
<li><a href="#javascript的helloworld">Javascript的Hello,world</a><ul>
<li><a href="#更js一点">更js一点</a></li>
<li><a href="#从数学出发">从数学出发</a></li>
<li><a href="#设计和编程">设计和编程</a></li>
<li><a href="#函数">函数</a></li>
<li><a href="#重新设计">重新设计</a></li>
<li><a href="#object和函数">object和函数</a></li>
<li><a href="#面向对象">面向对象</a></li>
<li><a href="#其他">其他</a></li>
<li><a href="#美妙之处-1">美妙之处</a></li>
</ul></li>
<li><a href="#css">CSS</a></li>
<li><a href="#关于css">关于CSS</a></li>
<li><a href="#代码结构">代码结构</a></li>
<li><a href="#样式与目标">样式与目标</a><ul>
<li><a href="#选择器">选择器</a></li>
</ul></li>
<li><a href="#更有趣的css">更有趣的CSS</a></li>
</ul></li>
<li><a href="#无处不在的三剑客">无处不在的三剑客</a><ul>
<li><a href="#hellogeek">Hello,Geek</a></li>
<li><a href="#从源码学习">从源码学习</a><ul>
<li><a href="#html">HTML</a></li>
</ul></li>
</ul></li>
<li><a href="#dom树形结构图">DOM树形结构图</a><ul>
<li><a href="#javascript">javascript</a></li>
<li><a href="#css-1">CSS</a></li>
</ul></li>
<li><a href="#css盒模型图">CSS盒模型图</a><ul>
<li><a href="#笔记">笔记</a></li>
<li><a href="#摘要">摘要</a></li>
<li><a href="#abstract">Abstract</a></li>
<li><a href="#绪论">绪论</a><ul>
<li><a href="#选题背景">选题背景</a></li>
<li><a href="#设计内容">设计内容</a></li>
<li><a href="#设计的目的及其意义">设计的目的及其意义</a></li>
<li><a href="#国内外发展现状和趋势">国内外发展现状和趋势</a></li>
</ul></li>
</ul></li>
<li><a href="#系统总体设计方案">系统总体设计方案</a><ul>
<li><a href="#硬件方案选择">硬件方案选择</a><ul>
<li><a href="#单片机选择">单片机选择</a></li>
</ul></li>
<li><a href="#软件方案选择">软件方案选择</a><ul>
<li><a href="#数据通讯方式选择">数据通讯方式选择</a></li>
<li><a href="#数据通信格式选择">数据通信格式选择</a></li>
</ul></li>
<li><a href="#网络服务方案选择">网络服务方案选择</a><ul>
<li><a href="#语言选择">语言选择</a></li>
</ul></li>
<li><a href="#其它">其它</a><ul>
<li><a href="#数据通讯设备">数据通讯设备</a></li>
</ul></li>
<li><a href="#辅助语言选择">辅助语言选择</a></li>
<li><a href="#串口通信模块">串口通信模块</a></li>
<li><a href="#网页通信">网页通信</a></li>
<li><a href="#数据可视化框架选择">数据可视化框架选择</a></li>
</ul></li>
<li><a href="#本地系统设计">本地系统设计</a><ul>
<li><a href="#硬件设计">硬件设计</a><ul>
<li><a href="#raspberry-pi">Raspberry Pi</a></li>
</ul></li>
<li><a href="#软件设计">软件设计</a></li>
<li><a href="#arduino-1">Arduino</a></li>
<li><a href="#raspberry-pi-1">Raspberry Pi</a><ul>
<li><a href="#获取数据">获取数据</a></li>
<li><a href="#串口通讯">串口通讯</a></li>
<li><a href="#python串口通讯">python串口通讯</a></li>
</ul></li>
</ul></li>
<li><a href="#网络系统设计">网络系统设计</a><ul>
<li><a href="#网络服务程序设计">网络服务程序设计</a><ul>
<li><a href="#基本的rest服务">基本的REST服务</a></li>
</ul></li>
<li><a href="#系统前台设计">系统前台设计</a><ul>
<li><a href="#ajax">Ajax</a></li>
<li><a href="#highcharts">Highcharts</a></li>
</ul></li>
<li><a href="#系统后台设计">系统后台设计</a><ul>
<li><a href="#数据库设计">数据库设计</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<h2 id="前言">前言</h2>
<p>设计物联网系统是一种有意思的事情，我们需要考虑到软件、硬件、通讯等等不同的几个方案。探索不同的语言，不同的框架，形成不同的解决方案。</p>
<p>在文档中，我们将对设计物联网系统有一个简单的介绍，我们会探讨如何设计一个最小的物联网系统。</p>
<h2 id="目标读者">目标读者</h2>
<p>本文档的目标读者是初入物联网领域，希望对物联网系统有一个大概的认识和把握，并学会如何掌握好一个基础的物联网系统的设计。</p>
<p>本文档对一些概念(如)只做了一些基本介绍，以及便于理解。如果想进一步了解这些概念，会列出一些推荐书目，以供参考。</p>
<h2 id="介绍">介绍</h2>
<h1 id="be-a-geek">Be a Geek</h1>
<p>有一天，走在回学校的路上，我在想：“未来是科技时代（现在也是），只是未来科技会无处不在，而如果我们对于周围的无处不在的代码一无所知的话，或许我们会成为黑客帝国中的一般人”。所以开始想着，人们会开始学习编程就像学习一门语言一样，直到有一天我看到了学习编程如同学习一门语言。这算是一个有趣的时间点，于是我开始想着像之前做最小物联网系统的那些步骤一样，写一个简单的入门。也可以补充好之前在这个最小物联网系统缺失的那些东西，给那些正在开始试图去解决编程问题的人。</p>
<p>我们先从身边的语言下手，也就是现在无处不在的html+javascript+css。</p>
<h2 id="从html开始">从html开始</h2>
<p>从html开始的原因在于我们不需要去配置一个复杂的开发环境，也许你还不知道开始环境是什么东西，而这些需要去慢慢的了解才能接触，特别是对于普通的业余爱好者来说，对于专业的选手那些自然不是问题。HTML是Web的核心语言，也算是基础的语言。</p>
<h3 id="html的helloworld">html的hello,world</h3>
<p>Hello,world是一个传统，所以在这里也遵循这个有趣的传统，我们所要做的事情事实很简单。虽然也有点hack的感觉，所以让我们新建一个文件叫“helloworld.html”。</p>
<p>(PS:大部分人应该都是在windows下工作的，所以你需要新建一个文本，然后重命名，或者你需要一个编辑器，在这里推荐用<strong>sublime text</strong>。破解不破解，注册不注册都不会对你的使用有太多的影响。)</p>
<ol style="list-style-type: decimal">
<li><p>新建文件</p></li>
<li>输入
<pre><code class="html">hello,world</code></pre>
</li>
<li><p>保存为-&gt;“helloworld.html”，</p></li>
<li><p>然后双击打开这个文件。 正常情况下应该是刚好用你的默认浏览器打开。只要是一个现代的浏览器的话，应该可以看到上面显示的是“Hello,world”。</p></li>
</ol>
<p>这才是最短的hello,world程序，其次呢？ruby中的会是这样子的</p>
<pre><code class="bash">2.0.0-p353 :001 > p "hello,world"
"hello,world"
 => "hello,world"
2.0.0-p353 :002 >
</code></pre>

<p>等等，如果你了解过html的话，会觉得这一点都不符合语法规则，但是他工作了，没有什么比安装完Nginx后看到It works!更让人激动了。</p>
<p>遗憾的是，它可能无法在所有的浏览器上工作，所以我们需要去调试其中的bug。</p>
<h3 id="调试helloworld">调试hello,world</h3>
<p>我们会发现我们的代码在浏览器中变成了下面的代码，如果你和我一样用的是chrome，那么你可以右键浏览器中的空白区域，点击审查元素，就会看到下面的代码。</p>
<pre><code>&lt;html&gt;
    &lt;head&gt;&lt;/head&gt;
    &lt;body&gt;hello,world&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>这个才是真正能在大部分浏览器上工作的代码，所以复制它到编辑器里吧。</p>
<h3 id="说说helloworld">说说hello,world</h3>
我很不喜欢其中的&lt;*&gt;<!--*-->超文本标记语言
</blockquote>
<p>所以我们可以发现其中的关键词是标记——markup，也就是说html是一个markup，head是一个markup，body是一个markup。</p>
<p>而后，我们真正工作的代码是在body里面，至于为什么是在里面，这个问题算是太复杂了。</p>
<ol style="list-style-type: decimal">
<li><p>我们所学的汉语是别人创造的，我们所正在学的这门语言也是别人创造的。</p></li>
<li><p>我们在自己的语言里遵循着<strong>他代表是个男的，她代替是个女的</strong>。</p></li>
</ol>
<h3 id="想用中文">想用中文？</h3>
<p>所以我们也可以把计算机语言与现实世界的语言划上一个等号。而我们所要学习的语言，因为没有一门真正意义上的汉语语言，所以我们便觉得这些很复杂，如果我们可以用汉语代换掉上面的代码的话</p>
<pre><code>&lt;语言&gt;
    &lt;头&gt;&lt;结束头&gt;
    &lt;身体&gt;你好，世界&lt;结束身体&gt;
&lt;结束语言&gt;</code></pre>
<p>看上去很奇怪，只是因为是音译过去的原因，也许你会觉得这样会好理解一点，但是输入上可能一点儿也不方便，因为这键盘都不适合我们去输入汉字，也意味着可能你输入的会有问题。</p>
<p>让我们把上面的代码代替掉原来的代码然后保存，打开浏览器会看到下面的结果</p>
<pre><code>&lt;语言&gt; &lt;头&gt;&lt;结束头&gt; &lt;身体&gt;你好，世界&lt;结束身体&gt; &lt;结束语言&gt;</code></pre>
<p>更不幸的结果可能是</p>
<pre><code>&lt;璇█&gt; &lt;澶�&gt;&lt;缁撴潫澶�&gt; &lt;韬綋&gt;浣犲ソ锛屼笘鐣�&lt;缁撴潫韬綋&gt; &lt;缁撴潫璇█&gt;</code></pre>
<p>这是一个编码问题，对中文支持不友好。</p>
<p>所以我们把上面的代码改为和标记语言一样的结构</p>
<pre><code>&lt;语言&gt;
    &lt;头&gt;&lt;/头&gt;
    &lt;身体&gt;你好，世界&lt;/身体&gt;
&lt;结束语言&gt;</code></pre>
<p>于是我们看到的结果便是</p>
<pre><code>&lt;语言&gt; &lt;头&gt; &lt;身体&gt;你好，世界</code></pre>
<p>被chrome浏览器解析成什么样了？</p>
<pre><code>&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;语言&gt;
        &lt;头&gt;&lt;!--头--&gt;
        &lt;身体&gt;你好，世界&lt;!--身体--&gt;
    &lt;!--语言--&gt;
&lt;/body&gt;&lt;/html&gt;      </code></pre>
<p>以&lt;!–开头，–&gt;结尾的是注释，写给人看的代码，不是给机器看的，所以机器不会去理解这些代码。</p>
<p>但是当我们把代码改成</p>
<pre><code>&lt;whatwewanttosay&gt;你好世界&lt;/whatwewanttosay&gt;</code></pre>
<p>浏览器上面显示的内容就变成了</p>
<pre><code>你好世界</code></pre>
<p>或许你会觉得很神奇，但是这一点儿也不神奇，虽然我们的中文语法也遵循着标记语言的标准，但是我们的浏览器不支持中文标记。</p>
<p>结论:</p>
<ol style="list-style-type: decimal">
<li>浏览器对中文支持不友好。</li>
<li>浏览器对英文支持友好。</li>
</ol>
<p>刚开始的时候不要对中文编程有太多的想法，这不是很现实的:</p>
<ol style="list-style-type: decimal">
<li>现有的系统都是基于英语构建的，对中文支持不是很友好。</li>
<li>中文输入的速度在某种程度上来说没有英语快。</li>
</ol>
<p>我们离开话题已经很远了，但是这里说的都是针对于那些不满于英语的人来说的，只有当我们可以从头构建一个中文系统的时候才是可行的，这些包括的东西有cpu，软件，硬件，而我们还需要考虑重新设计cpu的结构，在某种程度上来说会有些不现实。需要一代又一代的人的努力，只是在当前就更不现实了。忘记那些，师夷长之技以治夷。</p>
<h3 id="其他html标记">其他html标记</h3>
<p>添加一个标题，</p>
<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;标题&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;hello,world&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>我们便可以在浏览器的最上方看到“标题”二字，真实世界的淘宝网也包含了上面的东西，只是还包括了更多的东西，所以你也可以看懂那些我们可以看到的淘宝的标题。</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;标题&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
hello,world
&lt;h1&gt;大标题&lt;/h1&gt;
&lt;h2&gt;次标题&lt;/h2&gt;
&lt;h3&gt;...&lt;/h3&gt;
&lt;ul&gt;
    &lt;li&gt;列表1&lt;/li&gt;
    &lt;li&gt;列表2&lt;/li&gt;
&lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>更多的东西可以在一些书籍上看到，这边所要说的只是一次简单的语言入门，其他的东西都和这些类似。</p>
<h3 id="美妙之处">美妙之处</h3>
<p>我们简单地上手了一门不算是语言的语言，浏览器简化了这其中的大部分过程，虽然没有C和其他语言来得有专业感，但是我们试着去开始写代码了。我们可能在未来的某一篇中可能会看到类似的语言，诸如python，我们所要做的就是</p>
<pre><code>$ python file.py
=&gt;hello,world</code></pre>
<p>然后在终端上返回结果。只是因为在我看来学会html是有意义的，简单的上手，而后再慢慢地深入，如果一开始我们就开始去理解指针，开始去理解类。我们甚至还知道程序是怎么编译运行的时候，在这个过程中又发生了什么。虽然现在我们也没能理解这其中发生了什么，但是至少展示了</p>
<ol style="list-style-type: decimal">
<li>中文编程语言在当前意义不大，不现实，效率不高兼容性差</li>
<li>语言的语法是固定的。（ps:虽然我们也可以进行扩充，我们将会在后来支持上述的中文标记。）</li>
<li>已经开始写代码，而不是还在配置开发环境。</li>
<li>随身的工具才是最好的，最常用的code也才是实在的。</li>
</ol>
<h2 id="更多">更多</h2>
<p>我们还没有试着去解决，某商店里的糖一个5块钱，小明买了3个糖，小明一共花了多少钱的问题。也就是说我们学会的是一个还不能解决实际问题的语言，于是我们还需要学点东西如javascript,css。我们可以理解为Javascript是解决问题的语言，html是前端显示，css是配置文件，这样的话，我们会在那之后学会成为一个近乎专业的程序员。我们刚学了下怎么在前端显示那些代码的行为，于是我们还需要Javascript。 #无处不在的Javascript#</p>
<p>Javascript现在已经无处不在了，也许你正打开的某个网站他可能是node.js+json+javascript+mustache.js完成的，虽然你还没理解上面那些是什么，也正是因为你不理解才需要去学习更多的东西。但是Javascript已经无处不在了，可能会在你手机上的某个app里，在你浏览的网页里，在你IDE中的某个进程中运行的。</p>
<h2 id="javascript的helloworld">Javascript的Hello,world</h2>
<p>这里我们还需要有一个helloworld.html，Javascript是专为网页交互而设计的脚本语言，所以我们一点点来开始这部分的旅途，先写一个符合标准的helloworld.html</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;&lt;/head&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>然后开始融入我们的javascript，向HTML中插入Javascript的方法，就需要用到html中的&lt;script&gt;标签，我们先用页面嵌入的方法来写helloworld。</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;script&gt;
            document.write(&#39;hello,world&#39;);
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>按照标准的写法，我们还需要声明这个脚本的类型</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            document.write(&#39;hello,world&#39;);
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>没有显示hello,world?试试下面的代码</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            document.write(&#39;hello,world&#39;);
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;noscript&gt;
            disable Javascript
        &lt;/noscript&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3 id="更js一点">更js一点</h3>
<p>我们需要让我们的代码看上去更像是js，同时是以js结尾。C语言的源码但是以C结尾的，所以我们要让我们的代码看上去更正式一点。于是我们需要在helloworld.html的同文件夹下创建一个app.js，里面写着</p>
<pre><code class="javascript">document.write('hello,world');
</code></pre>

<p>同时我们的helloworld.html还需要告诉我们的浏览器js代码在哪里</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;app.js&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;noscript&gt;
            disable Javascript
        &lt;/noscript&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3 id="从数学出发">从数学出发</h3>
<p>让我们回到第一章讲述的小明的问题，<strong>从实际问题下手编程，更容易学会编程</strong>。小学时代的数学题最喜欢这样子了——某商店里的糖一个5块钱，小明买了3个糖，小明一共花了多少钱的问题。在编程方面，也许我们还算是小学生。最直接的方法就是直接计算3x5=?</p>
<pre><code class="javascript">document.write(3*5);
</code></pre>

<p>document.write实际也我们可以理解为输出，也就是往页面里写入3*5的结果，在有双引号的情况下会输出字符串。我们便会在浏览器上看到15，这便是一个好的开始，也是一个不好的开始。</p>
<h3 id="设计和编程">设计和编程</h3>
<p>对于我们的实际问题如果总是止于所要的结果，很多年之后，我们成为了code monkey。对这个问题进行一次设计，所谓的设计有些时候会把简单的问题复杂化，有些时候会使以后的扩展更加简单。这一天因为这家商店的糖价格太高了，于是店长将价格降为了4块钱。</p>
<pre><code class="javascript">
document.write(3*4);
</code></pre>

<p>于是我们又得到了我们的结果，但是下次我们看到这些代码的时候没有分清楚哪个是糖的数量，哪个是价格，于是我们重新设计了程序</p>
<pre><code class="javascript">
tang=4;
num=3;
document.write(tang*num);
</code></pre>

<p>这才能叫得上是程序设计，或许你注意到了“;”这个符号的存在，我想说的是这是另外一个标准，我们不得不去遵守，也不得不去fuck。</p>
<h3 id="函数">函数</h3>
<p>记得刚开始学三角函数的时候，我们会写</p>
<pre><code>sin 30=0.5</code></pre>
而我们的函数也是类似于此，换句话说，因为很多搞计算机的先驱都学好了数学，都把数学世界的规律带到了计算机世界，所以我们的函数也是类似于此，让我们做一个简单的开始。
<pre><code class="javascript">
function hello(){
    return document.write("hello,world");
}
hello();
</code></pre>
<p>当我第一次看到函数的时候，有些小激动终于出现了。我们写了一个叫hello的函数，它返回了往页面中写入hello,world的方法，然后我们调用了hello这个函数，于是页面上有了hello,world。</p>
<pre><code class="javascript">
function sin(degree){
    return document.write(Math.sin(degree));
}
sin(30);
</code></pre>
<p>在这里degree称之为变量，也就是可以改变的量。 于是输出了-0.9880316240928602，而不是0.5，因为这里用的是弧度制，而不是角度制。</p>
<pre><code>sin(30)</code></pre>
<p>的输出结果有点类似于sin 30。写括号的目的在于，括号是为了方便解析，这个在不同的语言中可能是不一样的，比如在ruby中我们可以直接用类似于数学中的表达:</p>
<pre><code class="ruby">
2.0.0-p353 :004 > Math.sin 30
=> -0.9880316240928618
2.0.0-p353 :005 >
</code></pre>

<p>我们可以在函数中传入多个变量，于是我们再回到小明的问题，就会这样去写代码。</p>
<pre><code class="javascript">
function calc(tang,num){
    result=tang*num;
    document.write(result);
}
calc(3,4);
</code></pre>

<p>但是从某种程度上来说，我们的calc做了计算的事又做了输出的事，总的来说设计上有些不好。</p>
<h3 id="重新设计">重新设计</h3>
我们将输出的工作移到函数的外面，
<pre><code class="javascript">
function calc(tang,num){
    return tang*num;
}
document.write(calc(3,4));
</code></pre>

接着我们用一种更有意思的方法来写这个问题的解决方案
<pre><code class="javascript">
function calc(tang,num){
    return tang*num;
}
function printResult(tang,num){
    document.write(calc(tang,num));
}
printResult(3, 4)
</code></pre>
<p>看上去更专业了一点点，如果我们只需要计算的时候我们只需要调用calc，如果我们需要输出的时候我们就调用printResult的方法。</p>
<h3 id="object和函数">object和函数</h3>
<p>我们还没有说清楚之前我们遇到过的document.write以及Math.sin的语法看上去很奇怪，所以让我们看看他们到底是什么，修改app.js为以及内容</p>
<pre><code>document.write(typeof document);
document.write(typeof Math);</code></pre>
<p>typeof document会返回document的数据类型，就会发现输出的结果是</p>
<pre><code>object object</code></pre>
<p>所以我们需要去弄清楚什么是object。对象的定义是</p>
<blockquote>
无序属性的集合，其属性可以包含基本值、对象或者函数。
</blockquote>

<p>创建一个object，然后观察这便是我们接下来要做的</p>
<pre><code>store={};
store.tang=4;
store.num=3;
document.write(store.tang*store.num);</code></pre>
<p>我们就有了和document.write一样的用法，这也是对象的美妙之处，只是这里的对象只是包含着基本值，因为</p>
<pre><code>typeof story.tang=&quot;number&quot;</code></pre>
<p>一个包含对象的对象应该是这样子的。</p>
<pre><code>store={};
store.tang=4;
store.num=3;
document.writeln(store.tang*store.num);

var wall=new Object();
wall.store=store;
document.write(typeof wall.store);</code></pre>
<p>而我们用到的document.write和上面用到的document.writeln都是属于这个无序属性集合中的函数。</p>
<p>下面代码说的就是这个无序属性集中中的函数。</p>
<pre><code>var IO=new Object();
function print(result){
    document.write(result);
};
IO.print=print;
IO.print(&quot;a obejct with function&quot;);
IO.print(typeof IO.print);</code></pre>
<p>我们定义了一个叫IO的对象，声明对象可以用</p>
<pre><code>var store={};</code></pre>
<p>又或者是</p>
<pre><code>var store=new Object{};</code></pre>
<p>两者是等价的，但是用后者的可读性会更好一点，我们定义了一个叫print的函数，他的作用也就是document.write，IO中的print函数是等价于print()函数，这也就是对象和函数之间的一些区别，对象可以包含函数，对象是无序属性的集合，其属性可以包含基本值、对象或者函数。</p>
<p>复杂一点的对象应该是下面这样的一种情况。</p>
<pre><code>var Person={name:&quot;phodal&quot;,weight:50,height:166};
function dream(){
    future;
};
Person.future=dream;
document.write(typeof Person);
document.write(Person.future);</code></pre>
<p>而这些会在我们未来的实际编编程中用得更多。</p>
<h3 id="面向对象">面向对象</h3>
<p>开始之前先我们简化上面的代码，</p>
<pre><code>Person.future=function dream(){
    future;
}</code></pre>
<p>看上去比上面的简单多了，不过我们还可以简化为下面的代码。。。</p>
<pre><code>var Person=function(){
    this.name=&quot;phodal&quot;;
    this.weight=50;
    this.height=166;
    this.future=function dream(){
        return &quot;future&quot;;
    };
};
var person=new Person();
document.write(person.name+&quot;&lt;br&gt;&quot;);
document.write(typeof person+&quot;&lt;br&gt;&quot;);
document.write(typeof person.future+&quot;&lt;br&gt;&quot;);
document.write(person.future()+&quot;&lt;br&gt;&quot;);</code></pre>
<p>只是在这个时候Person是一个函数，但是我们声明的person却变成了一个对象<strong>一个Javascript函数也是一个对象，并且，所有的对象从技术上讲也只不过是函数。</strong>这里的+“<br>”是HTML中的元素，称之为DOM，在这里起的是换行的作用，我们会在稍后介绍它，这里我们先关心下this。this关键字表示函数的所有者或作用域，也就是这里的Person。</p>
<p>上面的方法显得有点不可取，换句话说和一开始的</p>
<pre><code>document.write(3*4);</code></pre>
<p>一样，不具有灵活性，因此在我们完成功能之后，我们需要对其进行优化，这就是程序设计的真谛——解决完实际问题后，我们需要开始真正的设计，而不是解决问题时的编程。</p>
<pre><code>var Person=function(name,weight,height){
    this.name=name;
    this.weight=weight;
    this.height=height; 
    this.future=function(){
        return &quot;future&quot;;
    };
};
var phodal=new Person(&quot;phodal&quot;,50,166);
document.write(phodal.name+&quot;&lt;br&gt;&quot;);
document.write(phodal.weight+&quot;&lt;br&gt;&quot;);
document.write(phodal.height+&quot;&lt;br&gt;&quot;);
document.write(phodal.future()+&quot;&lt;br&gt;&quot;);</code></pre>
<p>于是，产生了这样一个可重用的Javascript对象,this关键字确立了属性的所有者。</p>
<h3 id="其他">其他</h3>
<p>Javascript还有一个很强大的特性，也就是原型继承，不过这里我们先不考虑这些部分，用尽量少的代码及关键字来实际我们所要表达的核心功能，这才是这里的核心，其他的东西我们可以从其他书本上学到。</p>
<p>所谓的继承，</p>
<pre><code>var Chinese=function(){
    this.country=&quot;China&quot;;
}

var Person=function(name,weight,height){
    this.name=name;
    this.weight=weight;
    this.height=height; 
    this.futrue=function(){
        return &quot;future&quot;;
    }
}
Chinese.prototype=new Person();


var phodal=new Chinese(&quot;phodal&quot;,50,166);
document.write(phodal.country);</code></pre>
<p>完整的Javascript应该由下列三个部分组成:</p>
<ul>
<li>核心(ECMAScript)——核心语言功能</li>
<li>文档对象模型(DOM)——访问和操作网页内容的方法和接口</li>
<li>浏览器对象模型(BOM)——与浏览器交互的方法和接口</li>
</ul>
<p>我们在上面讲的都是ECMAScript，也就是语法相关的，但是JS真正强大的，或者说我们最需要的可能就是对DOM的操作，这也就是为什么jQuery等库可以流行的原因之一，而核心语言功能才是真正在哪里都适用的，至于BOM真正用到的机会很少，因为没有好的统一的标准。</p>
<p>一个简单的DOM示例,</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;noscript&gt;
        disable Javascript
    &lt;/noscript&gt;
    &lt;p id=&quot;para&quot; style=&quot;color:red&quot;&gt;Red&lt;/p&gt;
&lt;/body&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;app.js&quot;&gt;&lt;/script&gt;
&lt;/html&gt;</code></pre>
<p>我们需要修改一下helloworld.html添加</p>
<pre><code>&lt;p id=&quot;para&quot; style=&quot;color:red&quot;&gt;Red&lt;/p&gt;</code></pre>
<p>同时还需要将script标签移到body下面，如果没有意外的话我们会看到页面上用红色的字体显示Red，修改app.js。</p>
<pre><code>var para=document.getElementById(&quot;para&quot;);
para.style.color=&quot;blue&quot;;</code></pre>
<p>接着，字体就变成了蓝色，有了DOM我们就可以对页面进行操作，可以说我们看到的绝大部分的页面效果都是通过DOM操作实现的。</p>
<h3 id="美妙之处-1">美妙之处</h3>
<p>这里说到的Javascript仅仅只是其中的一小小部分，忽略掉的东西很多，只关心的是如何去设计一个实用的app，作为一门编程语言，他还有其他强大的内制函数，要学好需要一本有价值的参考书。这里提到的只是其中的不到20%的东西，其他的80%或者更多会在你解决问题的时候出现。</p>
<ul>
<li>我们可以创建一个对象或者说函数，它可以包含基本值、对象或者函数。</li>
<li>我们可以用Javascript修改页面的属性，虽然只是简单的示例。</li>
<li>我们还可以去解决实际的编程问题。 #无处不在的CSS#</li>
</ul>
<p>CSS或许你觉得他一点儿也不重要，HTML好比是建筑的框架，CSS就是用于装修房子。那么Javascript呢，我听到的最有趣的说法是小三，先让我们回到代码上来吧。</p>
<h2 id="css">CSS</h2>
<p>下面就是我们之前说到的代码，css将Red三个字母变成了红色。</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p id=&quot;para&quot; style=&quot;color:red&quot;&gt;Red&lt;/p&gt;
&lt;/body&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;app.js&quot;&gt;&lt;/script&gt;
&lt;/html&gt;</code></pre>
<p>只是，</p>
<pre><code>var para=document.getElementById(&quot;para&quot;);
para.style.color=&quot;blue&quot;;</code></pre>
<p>将字体变成了蓝色，CSS+HTML让页面有序的工作着，但是Javascript打乱了这些秩序，不过却也让生活多姿多彩，小三不都是这样的么——终于可以理解，为什么以前人们对于Javascript没有好感了？不过这里要讲的是正室，也就是CSS，这时还没有Javascript。</p>
<div class="figure">
<img src="./src/redfonts.png" alt="Alt text" /><p class="caption">Alt text</p>
</div>
<h2 id="关于css">关于CSS</h2>
<p>这不是一篇好的关于讲述CSS的书籍，所以不会去说CSS是怎么来的，有些东西既然我们可以很容易从其他地方知道，也就不需要花太多时间去重复。诸如重构等这些的目的之一也在于去除重复的代码，不过有些重复是不可少的，也是有必要的，而通常这些东西可能是由其他地方复制过来的。</p>
<p>到目前为止我们没有依赖于任何特殊的硬件或者是软件，对于我们来说我们最基本的需求就是一台电脑，或者可以是你的平板电脑，当然也可以是你的智能手机，因为他们都有个浏览器，而这些都是能用的，对于我们的CSS来说也不会有例外的。</p>
<p>CSS是来自于(Cascading Style Sheets)，到今天我也没有记得他的全称，CSS还有一个中文名字是层叠式样式表，翻译成什么样的可能并不是我们关心的内容，我们需要关心的是他能做些什么。作为三剑客之一，它的主要目的在于可以让我们方便灵活地去控制Web页面的外观表现。我们可以用它做出像淘宝一样复杂的界面，也可以像我们的书本一样简单，不过如果要和我们书本一样简单的话，可能不需要用到CSS。HTML一开始就是依照报纸的格式而设计的，我们还可以继续用上面说到的编辑器，又或者是其他的。如果你喜欢DreamWeaver那也不错，不过一开始使用IDE可无助于我们写出良好的代码。</p>
<p>忘说了，CSS也是有版本的，和windows，Linux内核等等一样，但是更新可能没有那么频繁，HTML也是有版本的，JS也是有版本的，复杂的东西不是当前考虑的内容。</p>
<h2 id="代码结构">代码结构</h2>
<p>对于我们的上面的Red示例来说，如果没有一个好的结构，那么以后可能就是这样子。</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p style=&quot;font-size: 22px;color:#f00;text-align: center;padding-left: 20px;&quot;&gt;如果没有一个好的结构&lt;/p&gt;
    &lt;p style=&quot;  font-size:44px;color:#3ed;text-indent: 2em;padding-left: 2em;&quot;&gt;那么以后可能就是这样子。。。。&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>虽然我们看到的还是一样的:</p>
<div class="figure">
<img src="./src/nostyle.png" alt="Alt text" /><p class="caption">Alt text</p>
</div>
<p>于是我们就按各种书上的建议重新写了上面的代码</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;CSS example&lt;/title&gt;
    &lt;style type=&quot;text/css&quot;&gt;
        .para{
            font-size: 22px;
            color:#f00;
            text-align: center;
            padding-left: 20px;
        }
        .para2{
            font-size:44px;
            color:#3ed;
            text-indent: 2em;
            padding-left: 2em;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p class=&quot;para&quot;&gt;如果没有一个好的结构&lt;/p&gt;
    &lt;p class=&quot;para2&quot;&gt;那么以后可能就是这样子。。。。&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>总算比上面好看也好理解多了，这只是临时的用法，当文件太大的时候，正式一点的写法应该是下面:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;CSS example&lt;/title&gt;
    &lt;style type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p class=&quot;para&quot;&gt;如果没有一个好的结构&lt;/p&gt;
    &lt;p class=&quot;para2&quot;&gt;那么以后可能就是这样子。。。。&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>我们需要</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;CSS example&lt;/title&gt;
    &lt;link href=&quot;./style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p class=&quot;para&quot;&gt;如果没有一个好的结构&lt;/p&gt;
    &lt;p class=&quot;para2&quot;&gt;那么以后可能就是这样子。。。。&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>然后我们有一个像app.js一样的style.css放在同目录下，而他的内容便是</p>
<pre><code>.para{
    font-size: 22px;
    color:#f00;
    text-align: center;
    padding-left: 20px;
}
.para2{
    font-size:44px;
    color:#3ed;
    text-indent: 2em;
    padding-left: 2em;
}</code></pre>
<p>这代码和JS的代码有如此多的相似</p>
<pre><code>var para={
    font_size:&#39;22px&#39;,
    color:&#39;#f00&#39;,
    text_align:&#39;center&#39;,
    padding_left:&#39;20px&#39;,
}</code></pre>
<p>而22px、20px以及#f00都是数值，因此。。</p>
<pre><code>var para={
    font_size:22px,
    color:#f00,
    text_align:center,
    padding_left:20px,
}   </code></pre>
<p>目测差距已经尽可能的小了，至于这些话题会在以后讨论到，如果要让我们的编译器更正确的工作，那么我们就需要非常多的这种符号，除非你乐意去理解:</p>
<pre><code>(dotimes (i 4) (print i))</code></pre>
<p>总的来说我们减少了符号的使用，但是用lisp便带入了更多的括号，不过这是一种简洁的表达方式，也许我们可以在其他语言中看到，或者说用这个去。。</p>
<pre><code>\d{2}/[A-Z][a-z][a-z]/\d{4}</code></pre>
<p>没有什么会比一开始不理解那是正则表达式，然后去修改上面的代码，为的是去从一堆数据中找出某日/某月/某年。</p>
<p>这门语言可能是为设计师而设计的，但是设计师大部分还是不懂编程的，不过相对来说还是比其他语言好理解一些。</p>
<h2 id="样式与目标">样式与目标</h2>
<p>下面也就是我们的样式</p>
<pre><code>.para{
    font-size: 22px;
    color:#f00;
    text-align: center;
    padding-left: 20px;
}</code></pre>
<p>我们的目标就是</p>
<pre><code>如果没有一个好的结构</code></pre>
<p>所以样式和目标在这里牵手了，问题是他们是如何在一起的呢？下面就是CSS与HTML沟通的重点所在了:</p>
<h3 id="选择器">选择器</h3>
<p>我们用到的选择器叫做类选择器，也就是class，或者说应该称之为class选择器更合适。与类选择器最常一起出现的是ID选择器，不过这个适用于比较高级的场合，诸如用JS控制DOM的时候就需要用到ID选择器。而基本的选择器就是如下面的例子:</p>
<pre><code>p.para{
    color:#f0f;
}</code></pre>
<p>将代码添加到style.css的最下面会发现“如果没有一个的结构”变成了粉红色，当然我们还会有这样的写法</p>
<pre><code>p&gt;.para{
    color:#f0f;
}</code></pre>
<p>为了产生上面的特殊的样式，虽然不好看，但是我们终于理解什么叫层叠样式了，下面的代码的重要度比上面高，也因此有更高的优先规则。</p>
<p>而通常我们可以通过一个</p>
<pre><code>p{
    text-align:left;
}</code></pre>
<p>这样的元素选择器来给予所有的p元素一个左对齐。</p>
<p>还有复杂一点的复合型选择器，下面的是HTML文件</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;CSS example&lt;/title&gt;
    &lt;link href=&quot;./style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;p class=&quot;para&quot;&gt;如果没有一个好的结构&lt;/p&gt;
    &lt;div id=&quot;content&quot;&gt;
        &lt;p class=&quot;para2&quot;&gt;那么以后可能就是这样子。。。。&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>还有CSS文件</p>
<pre><code>.para{
    font-size: 22px;
    color:#f00;
    text-align: center;
    padding-left: 20px;
}
.para2{
    font-size:44px;
    color:#3ed;
    text-indent: 2em;
    padding-left: 2em;
}

p.para{
    color:#f0f;
}
div#content p {
    font-size:22px;
}</code></pre>
<h2 id="更有趣的css">更有趣的CSS</h2>
<p>一个包含了para2以及para_bg的例子</p>
<pre><code>    &lt;div id=&quot;content&quot;&gt;
        &lt;p class=&quot;para2 para_bg&quot;&gt;那么以后可能就是这样子。。。。&lt;/p&gt;
    &lt;/div&gt;
    </code></pre>
<p>我们只是添加了一个黑色的背景</p>
<pre><code>.para_bg{
    background-color:#000;
}</code></pre>
<p>重新改变后的网页变得比原来有趣了很多，所谓的继承与合并就是如上面的例子。</p>
<p>我们还可以用CSS3做出有趣的效果，而这些并不在我们的讨论范围里面，因为我们讨论的是be a geek。</p>
<p>或许我们写的代码都是那么的简单，从HTML到Javascript，还有现在的CSS，只是有一些东西才是核心的，而不是去考虑一些基础的语法，基础的东西我们可以从实践的过程中一一发现。但是我们可能发现不了，或者在平时的使用中考虑不到一些有趣的用法或者说特殊的用法，这些可以从观察一些比较好的设计的代码中学习到。复杂的东西可以变得很简单，简单的东西也可以变得很复杂。</p>
<h1 id="无处不在的三剑客">无处不在的三剑客</h1>
<p>这时我们终于了解了我们的三剑客，就这么可以结合到一起了，HTML+Javascript+CSS是这一切的基础。而我们用到的其他语言如PHP、Python、Ruby等等的最后都会变成上面的结果，当然还有Coffeescript之类的语言都是以此为基础，这才是我们需要的知识。</p>
<h2 id="hellogeek">Hello,Geek</h2>
<p>有了一些些的基础之后，我们终于能试着去写一些程序了。也是时候去创建一个像样的东西，或许你在一些见面设计方面的书籍看过类似的东西，可能我写得也没有那些内容好，只是这些都是一些过程。过去我们都是一点点慢慢过来的，只是现在我们也是如此，技术上的一些东西，事实上大家都是知道的。就好比我们都觉得我们可以开个超市，但是如果让我们去开超市的话，我们并不一定能赚钱。</p>
<p>学习编程的目的可能不在于我们能找到一份工作，那只是在编程之外的东西，虽然确实也是很确定的。但是除些之处，有些东西也是很重要的。、</p>
<p>过去没有理解为什么会一些人会不厌其烦地去回答别人的问题，有时候可能会想是一种能力越大责任越大的感觉，但是有时候在写一些博客或者回答别人的问题的时候我们又重新思考了这些问题，又重新学习了这些技能。所以这里可能说的不是关于编程的东西而是一些编程以外的东西，关于学习或者学习以外的东西。</p>
<h2 id="从源码学习">从源码学习</h2>
<p>过去总会觉得学了一种语言的语法便算是学了一种语言，于是有一天发现到了这个语言的项目上的时候，虽然会写上几行代码，但是却不像这语言的风格。于是这也是这一篇的意义所在了：</p>
<h3 id="html">HTML</h3>
<p>写好HTML的一个要点在于看别人写的代码，这只是一方面，我们所说的HTML方面的内容可能不够多，原因有很多，很多东西都需要在实战中去解决。读万卷书和行万里路，分不清哪个有重要的意义，但是如果可以同时做好两个的话，成长会很快的。</p>
<p>写好HTML应该会有下面的要点</p>
<ul>
<li>了解标准及遵守绝大多数标准</li>
<li>注重可读性，从ID及CLASS的命名</li>
<li>关注SEO与代码的联系</li>
</ul>
<p>或许在这方面我也算不上很了解，不过按笔者的经验来说，大致就是如此。</p>
<p>多数情况下我们的HTML是类似于下面这样子的</p>
<pre><code>&lt;div class=&quot;col-md-3 right&quot;&gt;
    {% nevercache %}
    {% include &quot;includes/user_panel.html&quot; %}
    {% endnevercache %}
    &lt;div class=&quot;panel panel-default&quot;&gt;
    &lt;div class=&quot;panel-body&quot;&gt;
    {% block right_panel %}
    {% ifinstalled mezzanine.twitter %}
    {% include &quot;twitter/tweets.html&quot; %}
    {% endifinstalled %}
    {% endblock %}
    &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>换句话说HTML只是基础，而不是日常用到的。我们的HTML是由template生成的，我们可以借助于mustache.js又或者是angluarjs之类的js库来生成最后的HTML，所以这里只是一个开始。</p>
<p>还需要了解的一部分就是HTML的另外一个重要的部分，DOM树形结构</p>
<h1 id="dom树形结构图">DOM树形结构图</h1>
<h3 id="javascript">javascript</h3>
<p>这里以未压缩的jQuery源码和zepto.js作一个小小的比较，zepto.js是兼容jQuery的，因此我们举几个有意思的函数作一简单的比较，关于源码可以在官网上下载到。</p>
<p>在zepto.js下面判断一个值是否是函数的方面如下，</p>
<pre><code>function isFunction(value) { return type(value) == &quot;function&quot; }</code></pre>
<p>而在jQuery下面则是这样的</p>
<pre><code>isFunction: function( obj ) {
    return jQuery.type(obj) === &quot;function&quot;;
},</code></pre>
<p>而他们的用法是一样的，都是</p>
<pre><code>$.isFunction();</code></pre>
<p>jQuery的作法是将诸如isFunction,isArray这些函数打包到jQuery.extend中，而zepto.js的则是 也是这样的，只不过多了一行</p>
<pre><code>$.isFunction = isFunction</code></pre>
<p>遗憾的是我也没去了解过为什么，之前我也没有看过这些库的代码，所以这个问题就要交给读者去解决了。jQuery里面提供了函数式编程接口，不过jQuery更多的是构建于CSS选择器之上，对于DOM的操作比javascript自身提供的功能强大得多。如果我们的目的在于更好的编程，那么可能需要诸如Underscore.js之类的库。或许说打包自己常用的函数功能为一个库，诸如jQuery</p>
<pre><code>function isFunction(value) { return type(value) == &quot;function&quot; }
function isWindow(obj)     { return obj != null &amp;&amp; obj == obj.window }
function isDocument(obj)   { return obj != null &amp;&amp; obj.nodeType == obj.DOCUMENT_NODE }
function isObject(obj)     { return type(obj) == &quot;object&quot; }</code></pre>
<p>我们需要去了解一些故事背后的原因，越来越害怕GUI的原因之一，在于不知道背后发生了什么，即使是开源的，我们也无法了解真正的背后发生什么了。对于不是这个工具、软件的用户来说，开源更多的意义可能在于我们可以添加新的功能，以及免费。如果没有所谓的危机感，以及认为自己一直在学习工具的话，可以试着去打包自己的函数，打包自己的库。</p>
<pre><code>var calc={
    add: function(a,b){
        return a+b;
    },
    sub: function(a,b){
        return a-b;
    },
    dif: function(a,b){
        if(a&gt;b){
            return a;
        }else{
            return b;
        }
    }
}</code></pre>
<p>然后用诸如jslint测试一下代码。</p>
<pre><code>$ ./jsl -conf jsl.default.conf
JavaScript Lint 0.3.0 (JavaScript-C 1.5 2004-09-24)
Developed by Matthias Miller (http://www.JavaScriptLint.com)

app.js
/Users/fdhuang/beageek/chapter4/src/app.js(15): lint warning: missing semicolon
    }
........^


0 error(s), 1 warning(s)</code></pre>
<p>于是我们需要在第15行添加一个分号。</p>
<p>最好的方法还是阅读别人的代码，而所谓的别人指的是一些相对较大的网站的，有好的开发流程，代码质量也不会太差。而所谓的复杂的代码都是一步步构建上去的，罗马不是一天建成的。</p>
<p>有意思的是多数情况下，我们可能会用原型去开发我们的应用，而这也是我们需要去了解和掌握的地方，</p>
<pre><code>function Calc(){

}
Calc.prototype.add=function(a,b){
    return a+b;
};
Calc.prototype.sub=function(a,b){
    return a-b;
};</code></pre>
<p>我们似乎在这里展示了更多的Javascript的用法，但是这不是一好的关于Javascript的介绍，有一天我们还要用诸如qunit之类的工具去为我们的function写测试，这时就是一个更好的开始。</p>
<p>如果我们乐意的话，我们也可以构建一个类似于jQuery的框架，以用来学习。</p>
<p>作为一门编程语言来说，我们学得很普通，在某种意义上来说算不上是一种入门。但是如果我们可以在其他的好书在看到的内容，就没有必要在这里进行复述，目的在于一种学习习惯的养成。</p>
<h3 id="css-1">CSS</h3>
<p>CSS有时候很有趣，但是有时候有很多我们没有意识到的用法，这里以Bootstrap为例，这是一个不错的CSS库。最令人兴奋的是没有闭源的CSS，没有闭源的JS，这也就是前端好学习的地方所在了，不过这是一个开源的CSS库，虽然是这样叫的，但是称之为CSS库显然不合适。</p>
<pre><code>a,
a:visited {
  text-decoration: underline;
}
a[href]:after {
  content: &quot; (&quot; attr(href) &quot;)&quot;;
}
abbr[title]:after {
  content: &quot; (&quot; attr(title) &quot;)&quot;;
}
a[href^=&quot;javascript:&quot;]:after,
a[href^=&quot;#&quot;]:after {
  content: &quot;&quot;;
}</code></pre>
<p>这里有一些有趣的，值得一讲的CSS用法。</p>
<ul>
<li>伪类选择器,如a:visited这样需要其他条件来对元素应用样式，用于已访问的链接。</li>
<li>属性选择器,如a[href]这样当a元素存在href这样的属性的时候来寻找应用元素。</li>
</ul>
<p>其他的还需要去好好了解的就是<strong>CSS的盒模型</strong>，作为CSS的基石之一。</p>
<h1 id="css盒模型图">CSS盒模型图</h1>
<p>诸如</p>
<pre><code>* {
  margin: 0px;
  padding: 0px;
  font-family: Helvetica;
}</code></pre>
<p>这样的通用器用来进行全局选择的工具和我们用于抵消某个body对于子选择器的影响一样值得注意得多。</p>
<h2 id="笔记">笔记</h2>
<p>写博客似乎是一个不错的好习惯，作为一个不是很优秀的写手。对于来说，有时候发现原来能教会别人对于自己的能力来说算是一种肯定。有些时候教会别人才算是自己学会的表现，总会在项目上的时候需要自己去复述工作的一个过程，我们需要整理好我们的思路才能带给别人更多的收获。我们的笔记上总会留下自己的学习的一些过程，有些时候我们想要的只是一点点的鼓励，有时是诸如评论一类，有时可能是诸如访问量。更多的可能是我们可以重新整理自己的知识，好好复习一下，以便于好好记住，写出来是一个好的过程。</p>
<p>无处不在的三剑客就这样到了这里，写得似乎很多也很少，但是还是没有做出来一个东西，于是我们朝着这样一个方向前进。 #物联网毕业设计#</p>
<h2 id="摘要">摘要</h2>
<p>随着经济社会的日趋发展及科学技术水平的不断提高，人们对于便利生活的要求越来越高。近年来，随着物联网领域稳步、缓慢地发展，物联网建设的网络环境已经逐渐成熟。由于物联网系统是一个综合性的，包含了硬件、软件、网络等多学科交叉的系统。对于物联网的研究和开发，已经成为一个个热门的话题。</p>
<p>本论文中介绍了以REST服务为核心、单片机、ARM开发板而辅助的物联网系统的结构组成及工作原理，提供了相应的软件代码及硬件结构。首先研究了不同服务框架的区别，包括不同语言间开发的优势及劣势，之后重点以REST服务为核心构建系统。本设计中，单片机与ARM开发板通过串口通信的方式实现通信，相互传输所需要的数据，ARM开发板将资源传于互联网上对应的接口，接口可以在互联网上被访问。将ARM开发板获取过来的数据存储于MySQL数据，再以REST服务的方式共享数据，互联网上的其他设备便可以通过网络来访问这些设备。系统分离了软件、硬件的耦合，不仅可以方便系统开发，也可以方便由不同的硬件替换相应的组成，使之更容易理解，同时可以实现更多设备的连接，以实现真正的物联。</p>
<p>本论文讨论的代码在GNU/Linux系统上开发，可在不同平台上开发及调度。</p>
<p><strong>关键词</strong> : <code>物联网</code>、<code>REST服务</code>、<code>RESTful</code></p>
<h2 id="abstract">Abstract</h2>
<p>With the increasing development and scientific and technological level of the economy and society continues to improve, people’s lives more convenient for the required high . In recent years, the field of Internet Of Things steady , slow development , networking and building the network environment has gradually matured. Because of Internet Of Things is a comprehensive system , including hardware , software, networks, and other multi-disciplinary systems. Things for research and development, has become one hot topic .</p>
<p>This paper described the Internet of Things system’s structure and principle in REST services as the core , microcontroller and ARM development board as assisted, and provided the appropriate software code and hardware architecture . First study the differences between the services framework, including language development among different strengths and weaknesses, then focus to build REST service system as the core . In this design, microcontroller communicate with development board by serial communication, mutual transmission of the data needed , ARM development board resources on the Internet pass the corresponding interface , the interface can be accessed on the Internet. The ARM development board to get over the data stored in MySQL, then the REST service to share data , other devices on the Internet will be able to access these devices through the network. Separation of the coupling system software, hardware , and can not only facilitate the development of the system , can also be easily replaced by a composition corresponding to different hardware , to make it easier to understand , and can connect more devices to achieve real objects associated .</p>
<p>Code discussed in this paper on the GNU / Linux system development, and scheduling can be developed on different platforms .</p>
<h2 id="绪论">绪论</h2>
<h3 id="选题背景">选题背景</h3>
<p>随着科技的发展，计算机电子技术迅猛发展，已经成为生活中不可缺少的部分。目前人们绝大多数都是采用PC进行网络数据传送，但由于成本高，限制了应用的范围。而嵌入式系统却越来越受到人们的青睐。它采用嵌入式的微处理器，支持 TCP/IP协议，它已成为网络发展新阶段的标志。</p>
<p>物联网是新一代信息技术的重要组成部分。其英文名称是The Internet of things。顾名思义，物联网的意思就是物物相连的互联网。这有两层意思：第一，物联网是建立在互联网之上的，是互联网的拓展和延伸；第二，其用户端扩 展和延伸到了物品与物品之间，进行信息通信和交换。物联网有如下特征：</p>
<p>首先，广泛应用了各种感知技术。在物联网中部署了大量的多种传感器，每个传感器都能从外界采集信息，不同类的传感器捕获的信息不同。而且获得的数据具有实时性，按照一定的规律来采集数据，不断更新数据。</p>
<p>其次，它是建立在互联网上的网络。物联网技术的核心和基础仍是互联网，通过各种无线和有线网络与互联网结合起来，将物体的信息准确实时地传递出去，数据传输过程中必须适应各种网络协议。</p>
<p>还有，物联网本身也具有一种智能处理的能力，能够智能控制物体。物联网从传感器中获得数据，然后进行分析，处理处有意义的数据，来适应不同用户的需求。</p>
<h3 id="设计内容">设计内容</h3>
<p>设计主要是关于基于RESTful服务的网络服务构建，可采用有线网络、无线网络、手机GSM网络等与Internet相关，通过手机、电脑 、移动设备等登录到网页可实现控制家电的上的，并可实时查看诸如温度等一些信息的基本内容。</p>
<p>硬件设计时，采用Arduino单片机系统，作为一个基于Atmega328芯片的最小系统，Arduino可以系统代码。Arduino主要用于展示LED灯的控制，通过与RaspberryPI开发板相连来获取实时状态。Raspberry PI作为一个ARM开发板，由于其运行的是Linux系统，在软件方面有着相对于其他开发板较好的支持，在这里是作为数据传输设备以用来进行模块分离。</p>
<p>软件设计时，由于一个物联网系统其核心是以网络为基础的，需要优先考虑网络 方面的优化，学需要考虑数据库等的问题。</p>
<p>用户界面设计时，随着近来来平板、手机等移动设备的流行，在设计时不能再以 桌面程序为核心，需要考虑不用设备之间的兼容性等问题，这里便以网页为核心 作为显示。而，随着云计算技术的流行，未来的物联网系统必然也会基于云计算 技术构建。作为一个可视化的网页来说，实时的状态显示等是较为重要，同时我 们需要考虑的是用户体验。</p>
<h3 id="设计的目的及其意义">设计的目的及其意义</h3>
<p>设计以简化物联网系统为主，简化一个可扩展的最小的物联网系统，以简化系统 的逻辑为起点，为广大的用户提供一个良好的了解物联网系统方面知识的框架。</p>
<h3 id="国内外发展现状和趋势">国内外发展现状和趋势</h3>
<p>物联网是建立在互联网技术之上的。目前，我国物联网发展与全球同处于起步阶 段，初步具备了一定的技术、产业和应用基础，呈现出良好的发展态势。把单片 机应用系统和Internet连接也已经是一种趋势。</p>
<p>目前无线通信网络已经覆盖各地，是实现“物联网”必不可少的设施，可以将安置 在每个物品上的电子介质产生的数字信号通过无线网络传输出去。“云计算”技术 的运用，使数以亿计的各类物品的实时动态管理变得可能。</p>
<p>物联网技术的推广已经取得一定的成效。在多方面已经开始应用，如远程抄表， 电力行业，视频监控等等。以及在物流领域和医疗领域也都日趋成熟，如物品存 储及运输监测，远程医疗，个人的健康监护等。除此之外在环境监控，楼宇节能， 食品等方面也开展了广泛应用。</p>
<p>尽管在这些领域已经取得一些进展，但应认识到，物联网发展技术还存在一系列 制约和瓶颈。有几个方面可以表现出来：核心技术与国外差距较大，集成服务能 力不够，缺乏骨干企业，应用水平不高，信息安全存在隐患。我们国家在PC架构 领域还没有主动权，软件产品很少。目前，计算环境正在向以网络为中心发展， 有很多产品不必也windows兼容，因此，研究单片机系统接入网络，前途宽广。</p>
<h1 id="系统总体设计方案">系统总体设计方案</h1>
<p>物联网的核心也就是网络服务，而网络服务在某种意义上来说，就是需要打造一 个多平台的通信协议，在使机器、家电、设备等连上计算机网络。基本的物联 网系统，不仅能控制设备，还可以在远程查看状态。而复杂的物联网系统可以让 互联网上的设备之间实现互联与通信，也就是物联网的最终目标所在——使物体与 物体之间的交互成为可能，不需要人为去干预。</p>
<p>系统采用的结构是: Arduino+Raspberry Pi+Laravel+JSON+RESTful+Ajax+Python+HighCharts，其框架图如下所示</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/struct.png" title="系统框架图" alt="系统框架图" /><p class="caption">系统框架图</p>
</div>
<p>Arduino与Raspberry Pi通过串口通信的方式实现通信，相互传输所需要的数据， Raspberry Pi将资源传于互联网上对应的接口，接口可以在互联网上被访问。 Laravel框架构架于服务器之上，将Raspbery Pi获取过来的数据存储于MySQL数 据，再以REST服务的方式共享数据，互联网上的其他设备便可以通过网络来访问 这些设备。Ajax用于将后台的数据以不需要刷新的方式传递到网站前台，通过 HighCharts框架显示给终端用户。</p>
<h2 id="硬件方案选择">硬件方案选择</h2>
<h3 id="单片机选择">单片机选择</h3>
<h4 id="arduino">Arduino</h4>
<p>Arduino，是一个开放源代码的单芯片微电脑，它使用了Atmel AVR单片机，采用 了基于开放源代码的软硬件平台，构建于开放源代码 simple I/O 接口板，并且 具有使用类似Java，C 语言的Processing/Wiring开发环境。</p>
<p>Arduino开发板封装了常用的库到开发环境中，可以让用户在开发产品时，将主 要注意力放置于所需要实现的功能上，而不是开发的过程中。在为Arduino写串 口程序时，我们只需要用Serial.begin(9600)以9600的速率初始化串口，而在往 串口发送数据时，可以用Serial.write(‘1’)的方式向串口发送字串’1’。</p>
<h4 id="section">51</h4>
<p>单片机<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>，又称微控制器，是把中央处理器、存储器、定时/计数器 （Timer/Counter）、各种输入输出接口等都集成在一块集成电路芯片上的微型 计算机。与应用在个人计算机中的通用型微处理器相比，它更强调自供应（不用 外接硬件）和节约成本。它的最大优点是体积小，可放在仪表内部，但存储量小， 输入输出接口简单，功能较低。</p>
<p>51单片机相较于Arduino开发板，不仅代码复杂，由于系统比较古老而不方便于 快速开发。</p>
<h2 id="软件方案选择">软件方案选择</h2>
<h3 id="数据通讯方式选择">数据通讯方式选择</h3>
<h4 id="rest">REST</h4>
<p>REST<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> 从资源的角度来观察整个网络，分布在各处的资源由URI确定，而客户端的 应用通过URI来获取资源的表征。获得这些表征致使这些应用程序转变了其状态。 随着不断获取资源的表征，客户端应用不断地在转变着其状态，所谓表征状态转 移。</p>
<h4 id="soap">SOAP</h4>
<p>简单对象访问协议是交换数据的一种协议规范，使用在计算机网络Web服务中， 交换带结构信息。SOAP为了简化网页服务器从XML数据库中提取数据时，节省去 格式化页面时间，以及不同应用程序之间按照HTTP通信协议，遵从XML格式执行 资料互换，使其抽象于语言实现、平台和硬件。</p>
<h3 id="数据通信格式选择">数据通信格式选择</h3>
<h4 id="json">JSON</h4>
<p>JSON<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机 器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语 言的文本格式，但是也使用了类似于C语言家族的习惯<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>。 这些特性使 JSON成为理想的数据交换语言。</p>
<p>JSON相对于XML来说可以减少文件的大小，同时我们可以用于网站前端的数据通讯。</p>
<p>对于基于浏览器的客户端使用的web服务更倾向于使用JSON作为表述格式。</p>
<h4 id="xml">XML</h4>
<p>可扩展标记语言<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>，是一种标记语言。标记指计算机所能理解的信息符号， 通过此种标记，计算机之间可以处理包含各种信息的文章等。如何定义这些标记， 既可以选择国际通用的标记语言，比如HTML，也可以使用像XML这样由相关人士 自由决定的标记语言，这就是语言的可扩展性。XML是从标准通用标记语言 （SGML）中简化修改出来的。它主要用到的有可扩展标记语言、可扩展样式语言 （XSL）、XBRL和XPath等。</p>
<p>XML具有良好的可读性，有着较好的库支持，从Java语言到其他语言，如Linux系 统上libxml等对XML的支持比较好。</p>
<h2 id="网络服务方案选择">网络服务方案选择</h2>
<h3 id="语言选择">语言选择</h3>
<p><strong>PHP Laravel</strong></p>
<p>PHP <a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a> 是一种开源的通用计算机脚本语言，尤其适用于网络开发并可嵌入 HTML中使用。PHP的语法借鉴吸收了C语言、Java和Perl等流行计算机语言的特点， 易于一般程序员学习。PHP的主要目标是允许网络开发人员快速编写动态页面， 但PHP也被用于其他很多领域。</p>
<p><strong>Laravel</strong></p>
<p>Laravel是一套简洁、优雅的PHP Web开发框架。它可以让你从面条一样杂乱的代 码中解脱出来；它可以帮你构建一个完美的网络APP，而且每行代码都可以简洁、 富于表达力。</p>
<p><strong>Java Spring</strong></p>
<p><strong>Java</strong></p>
<p>Java是一种可以撰写跨平台应用软件的面向对象的程序设计语言，是由Sun Microsystems公司于1995年5月推出的Java程序设计语言。Java 技术具有卓越的 通用性、高效性、平台移植性和安全性，广泛应用于个人PC、数据中心、游戏控 制台、科学超级计算机、移动电话和互联网，同时拥有全球最大的开发者专业社 群。在全球云计算和移动互联网的产业环境下，Java更具备了显著优势和广阔前 景。</p>
<p><strong>Spring</strong></p>
<p>Spring是一个开源框架，是为了解决企业应用程序开发复杂性。Spring框架的主 要优势之一就是其分层架构，分层架构允许使用者选择使用哪一个组件，同时为 J2EE 应用程序开发提供集成的框架。Spring使用基本的JavaBean来完成以前只 可能由EJB完成的事情。然而，Spring的用途不仅限于服务器端的开发。从简单 性、可测试性和松耦合的角度而言，任何Java应用都可以从Spring中受益。</p>
<p>由于相较于Java在web方面没有PHP来得快速、简单、有效，同时Laravel框架在 某些方面如数据迁移、代码生成比Spring快，同时不需要依赖于开发环境，这里 以Laravel作为框架，可以利用artisan工具等的强大驱动开发。</p>
<h2 id="其它">其它</h2>
<h3 id="数据通讯设备">数据通讯设备</h3>
<p><strong>Raspeberry PI</strong></p>
<p>Raspberry Pi是一款针对电脑业余爱好者、教师、小学生以及小型企业等用户的 迷你电脑，预装Linux系统，体积仅信用卡大小，搭载ARM架构处理器，运算性能 和智能手机相仿。在接口方面，Raspberry Pi提供了可供键鼠使用的USB接口，此外 还有千兆以太网接口、SD卡扩展接口以及1个HDMI高清视频输出接口，可与显示器或者TV相连。</p>
<p>Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和UNIX的 多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的UNIX工具软 件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为 核心的设计思想，是一个性能稳定的多用户网络操作系统。</p>
<p>Raspberry Pi相比于一般的ARM开发板来说，由于其本身搭载着Linux操作系统，可以用 诸如Python、Ruby或Bash来执行脚本，而不是通过编译程序来运行，具有更高的开发效率。</p>
<h2 id="辅助语言选择">辅助语言选择</h2>
<p><strong>Python</strong></p>
<p>Python, 是一种面向对象、直译式计算机程序设计语言，由Guido van Rossum于 1989年底发明，第一个公开发行版发行于1991年。Python语法简洁而清晰，具有 丰富和强大的类库。它常被昵称为胶水语言，它能够很轻松的把用其他语言制作 的各种模块（尤其是C/C++）轻松地联结在一起。常见的一种应用情形是，使用 python快速生成程序的原型（有时甚至是程序的最终界面），然后对其中有特别 要求的部分，用更合适的语言改写，比如3D游戏中的图形渲染模块，速度要求非 常高，就可以用C++重写。</p>
<p><strong>Ruby</strong></p>
<p>Ruby，一种为简单快捷的面向对象编程（面向对象程序设计）而创的脚本语言， 在20世纪90年代由日本人松本行弘开发，遵守GPL协议和Ruby License。</p>
<p>Python相对于Ruby有着更好的跨平台能力，同时有理好的可读性，加之Ruby语言 没有对串口通讯及Windows系统更好的支持。</p>
<h2 id="串口通信模块">串口通信模块</h2>
<p><strong>PySerial</strong></p>
<p>PySerial封装了串口通讯模块，支持Linux、Windows、BSD(可能支持所有支持POSIX的操 作系统)，支持Jython(Java)和IconPython(.NET and Mono).</p>
<p>在使用PySerial之后，我们只需要</p>
<pre class="sourceCode python"><code class="sourceCode python">ser=serial.Serial(<span class="st">&quot;/dev/ttyACM0&quot;</span>,<span class="dv">9600</span>)
ser.write(<span class="st">&quot;1&quot;</span>)</code></pre>
<p>就可以向串口发送一个字符1。</p>
<h2 id="网页通信">网页通信</h2>
<p><strong>Ajax</strong> AJAX <a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a> 是由Jesse James Gaiiett创造的名词，是指一种创建交互式网页 应用的网页开发技术。</p>
<p>系统主要用Ajax来实现实时温度显示，通过直接访问JSON数据的情况下，可以在 不需要刷新页面的情况下直接读取数据。</p>
<h2 id="数据可视化框架选择">数据可视化框架选择</h2>
<p><strong>HighCharts</strong></p>
<p>Highcharts 是一个用纯JavaScript编写的一个图表库， 能够很简单便捷的在 web网站或是web应用程序添加有交互性的图表，并且免费提供给个人学习、个人 网站和非商业用途使用。HighCharts支持的图表类型有曲线图、区域图、柱状图、 饼状图、散状点图和综合图表。</p>
<h1 id="本地系统设计">本地系统设计</h1>
<h2 id="硬件设计">硬件设计</h2>
<h3 id="raspberry-pi">Raspberry Pi</h3>
<p>Raspberry Pi开发板在这里主要工作有:</p>
<ul>
<li>与Arduino开发板，通过USB线连接。</li>
<li>可以直接运行Debian GNU/Linux系统，通过网线上网，并从服务器中读取数据，</li>
<li>通过Python语言接收、发送串口数据。</li>
</ul>
<h2 id="软件设计">软件设计</h2>
<p>在本地我们需要解决的问题可以如下描述，Arduino开发板从串口一直读取数据， Raspberry Pi从URL中验证数据、解析数据，再将数据发送到串口,我们可以用下面的伪代码来描述:</p>
<pre class="sourceCode ada"><code class="sourceCode ada">arduino:
        <span class="kw">begin</span>
           repeat
             wait(serial.open)
               data:=receive_data()
               led_status:=parse(data)
               <span class="kw">if</span> led_status
                  oped(led.id)
           util false
        <span class="kw">end</span>
raspberrypi:
        <span class="kw">begin</span>
           repeat
             json:=get_data(url)
             <span class="kw">if</span> validate(json).success()
               data:=parse（json)
               serial.write(data)
           util false
        <span class="kw">end</span></code></pre>
<h2 id="arduino-1">Arduino</h2>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/ArduinoUnoSmd.png" title="Arduino开发板" alt="Arduino开发板" /><p class="caption">Arduino开发板</p>
</div>
<p>Arduino UNO用的处微控制器是Atmega328，它与Arduino芯片的对应关系如下所示</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/atmega328w.png" title="Arduino管脚Atmega328对应图" alt="Arduino管脚Atmega328对应图" /><p class="caption">Arduino管脚Atmega328对应图</p>
</div>
<p>其主要参数如下所示:</p>
<p>高性能,低功耗的AVR®8位微控制器•先进的RISC结构</p>
<ul>
<li>131条指令</li>
<li>绝大多数为单时钟周期执行</li>
<li>32个通用工作寄存器</li>
<li>全静态工作</li>
<li>高达20 MIPS的吞吐量,在20 MHz</li>
<li>片上2周期乘法器高耐用性非易失性内存段</li>
<li>8K字节的系统内可编程Flash存储器（ATMEGA88PA中）</li>
<li>512字节的EEPROM（ATMEGA88PA）</li>
<li>1K字节的片内SRAM（ATMEGA88PA）</li>
<li>写/擦除次数：10,000次,000 EEPROM</li>
<li>数据保存：20年在85°C/100年在25°C(1)</li>
<li>可选的引导具有独立锁定位代码段在系统编程的片上引导程序真正的同时读</li>
<li>写操作</li>
<li>编程软件安全锁外设特点</li>
<li>两个8位定时器/计数器具有独立预分频器和比较模式</li>
<li>1个16位定时器/计数器具有独立预分频器,比较模式,并捕获模式</li>
<li>具有独立振荡器的实时计数器</li>
<li>6个PWM通道</li>
<li>8通道10位ADC在TQFP和QFN / MLF封装温度测量</li>
<li>6通道10位ADC引脚PDIP封装温度测量</li>
<li>可编程的串行USART</li>
<li>主/从机模式的SPI串行接口</li>
<li>面向字节的两线串行接口（飞利浦公司的I2C兼容）</li>
<li>独立的片内振荡器的可编程看门狗定时器</li>
<li>片上模拟比较器</li>
<li>中断和唤醒引脚电平变化单片机的特殊功能</li>
<li>上电复位以及可编程的掉电检测</li>
<li>内部校准振荡器</li>
<li>外部和内部中断源</li>
<li>6种睡眠模式：空闲模式,ADC噪声抑制,省电,掉电,待机,扩展Standby</li>
</ul>
<p>Arduino部分硬件程序如下所示，主要负责从串口中读入数据，并用led灯显示。 程序流程图如下所示</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/arduino.png" title="Arduino程序流程图" alt="Arduino程序流程图" /><p class="caption">Arduino程序流程图</p>
</div>
<p>系统主要的功能在于接收和传递数据。</p>
<p>代码如下所示</p>
<pre><code>void setup() {
  Serial.begin(9600);
  pinMode(13,OUTPUT);
  pinMode(12,OUTPUT);
}

int serialData;
void loop() {
  String inString = &quot;&quot;;
  while (Serial.available()&gt; 0)
  {
    int inChar = Serial.read();
    if (isDigit(inChar)) {
      inString += (char)inChar;
    }
    serialData=inString.toInt();
    Serial.print(serialData);
  }
  if(serialData==1){
    digitalWrite(12,LOW);
    digitalWrite(13,HIGH);
  }else{
    digitalWrite(13,LOW);
    digitalWrite(12,HIGH);
   }</code></pre>
<h2 id="raspberry-pi-1">Raspberry Pi</h2>
<p>Raspberrypi如下所示的开发板</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/raspberrypi.png" title="Raspberry Pi开发板" alt="Raspberry Pi开发板" /><p class="caption">Raspberry Pi开发板</p>
</div>
<pre><code>        begin
           repeat
             json:=get_data(url)
             if validate(json).success
               data:=parse（json)
               if data:==1
                  serial_send(&quot;1&quot;)
                else
                  serial_send(&quot;0&quot;)
              else
                  output &quot;error&quot;
           util false
        end</code></pre>
<h4 id="raspberry-pi程序">Raspberry Pi程序</h4>
<p>其程序流程图如下所示:</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/python.png" title="Python 程序流程图" alt="Python程序流程图" /><p class="caption">Python程序流程图</p>
</div>
<h3 id="获取数据">获取数据</h3>
<p>Raspberry Pi端的主要功能便是将数据从 <a href="http://www.xianuniversity.com/athome/1">http://www.xianuniversity.com/athome/1</a> [^domain] 下 载下来并解析数据，再将数据用串口通讯的方式传递给Arduino。</p>
<p>在Debian系统中，自带了python语言，python有良好的动态特性，同时有强大的自建库功能。 在python语言中可以用自带的urllib2库打开并下载网页的内容，将上述网址中 的JSON数据下载到本地。</p>
<p>数据采用的是JSON格式，具有良好的可读性，同时方便于解析，相比于XML格式 又可以减少文件大小，</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">    [{
        <span class="st">&quot;id&quot;</span>: <span class="dv">1</span>,
        <span class="st">&quot;temperature&quot;</span>: <span class="dv">10</span>,
        <span class="st">&quot;sensors1&quot;</span>: <span class="dv">22</span>,
        <span class="st">&quot;sensors2&quot;</span>: <span class="dv">11</span>,
        <span class="st">&quot;led1&quot;</span>: <span class="dv">0</span>
   }]</code></pre>
<p>JSON的 将上述中的数据取出来后，通过python中的json库，将json数据转换为数组，将 取出数据中的第一个结果中的id的值。</p>
<h3 id="串口通讯">串口通讯</h3>
<p>由于python中没有用于串口通讯的库，需要寻找并安装这样一个库，这里就用到 了pip这样的包管理工具——用于管理python的库。</p>
<h4 id="安装pyserial">安装pyserial</h4>
<p>pip常用命令有install、uninstall以及search，install顾名思义就是安装，安 装pip库如下所示<a href="#fn8" class="footnoteRef" id="fnref8"><sup>8</sup></a>，如后代码如下所示，$<a href="#fn9" class="footnoteRef" id="fnref9"><sup>9</sup></a>开头:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">    <span class="ot">$pip</span> <span class="kw">install</span> pyserial</code></pre>
<h3 id="python串口通讯">python串口通讯</h3>
<p>在Linux内核的系统<a href="#fn10" class="footnoteRef" id="fnref10"><sup>10</sup></a>中虚拟串口用的节点是ttyACM，位于/dev目录下。</p>
<pre class="sourceCode python"><code class="sourceCode python">    serial.Serial(<span class="st">&quot;/dev/ttyACM0&quot;</span>,<span class="dv">9600</span>)</code></pre>
<p>串行接口是一种可以将接受来自CPU的并行数据字符转换为连续的串行数据流发送出去， 同时可将接受的串行数据流转换为并行的数据字符供给CPU的器件。一般完成这种功能 的电路，我们称为串行接口电路。</p>
<p>便是打开这个设备，以9600的速率传输数据。</p>
<pre><code>import json
import urllib2
import serial
import time

url=&quot;http://www.xianuniversity.com/athome/1&quot;

while 1:
    try:
        date=urllib2.urlopen(url)
        result=json.load(date)
        status=result[0][&quot;led1&quot;]
        ser=serial.Serial(&quot;/dev/ttyACM0&quot;,9600)
        if status==1 :
            ser.write(&quot;1&quot;)
        elif status==0:
            ser.write(&quot;0&quot;)
        time.sleep(1)
    except urllib2.URLError:
        print &quot;Bad URL or timeout&quot;</code></pre>
<p>系统还需要对上面的数据进行处理，只拿其中的结果</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/origin.png" title="python处理完后的结果" alt="python处理完后的结果" /><p class="caption">python处理完后的结果</p>
</div>
<p>当改变led的状态后，便可以得到下面的结果</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/change.png" title="改变状态后的结果" alt="改变状态后的结果" /><p class="caption">改变状态后的结果</p>
</div>
<h1 id="网络系统设计">网络系统设计</h1>
<h2 id="网络服务程序设计">网络服务程序设计</h2>
<p>对于物联网系统网络的核心是构建一个RESTful服务，而这构建RESTful的核心便 是基础的HTPP协议。基础的HTTP协议便是:GET、POST、PUT、DELETE。它们分别 对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资 源），PUT用来更新资源，DELETE用来删除资源。</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/restful.png" title="restful" alt="restful" /><p class="caption">restful</p>
</div>
<p>简要的来说，一个GET动作便是在打开一个网页的时候，看到的内容，便是GET到 的资源。而在获取取到网页的内容之前，会有一个POST动作到所要打开的网站的 服务器。</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/getrequest.png" title="Get Request" alt="Get Request" /><p class="caption">Get Request</p>
</div>
<h3 id="基本的rest服务">基本的REST服务</h3>
<p>REST服务实际上是充当着网络与设备的传输介质，构建一个REST服务也就相当于 获取一个URL下的某个数据</p>
<pre><code>$curl http://www.xianuniversity.com/athome/1</code></pre>
<p>返回结果如下所示</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/jsondata.png" title="JSON结果返回图" alt="JSON结果返回图" /><p class="caption">JSON结果返回图</p>
</div>
<p>假设有这样一个资源用于呈现led的状态，即 http://localhost/status/1 <a href="#fn11" class="footnoteRef" id="fnref11"><sup>11</sup></a>，获取这个LED的状态便发出了类似下面这样的请求:</p>
<pre class="sourceCode python"><code class="sourceCode python">    GET /status/<span class="dv">1</span> HTTP/<span class="fl">1.1</span>
    Host:localhost
    Cotent-Type:application/json;charset=UTF<span class="dv">-8</span></code></pre>
<p>在客户端发出上述的请求的时候，服务端需要对其做出响应，构造出一个下面的结果</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">     [{
       <span class="st">&quot;status&quot;</span>:<span class="dv">1</span>
     }]</code></pre>
<p>1代表给予灯的状态应该是亮的,在那之后需要做的便是将其通过串口发送给单片 机进行处理，对应于一个关机的结果便是</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">     [{
       <span class="st">&quot;status&quot;</span>:<span class="dv">0</span>
     }]</code></pre>
<p>这样就完成了基本的状态设计。而对于系统最后需要解析的数据的结果来说，还需要加入其他元素，</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">    [{
        <span class="st">&quot;id&quot;</span>: <span class="dv">1</span>,
        <span class="st">&quot;temperature&quot;</span>: <span class="dv">10</span>,
        <span class="st">&quot;sensors1&quot;</span>: <span class="dv">22</span>,
        <span class="st">&quot;sensors2&quot;</span>: <span class="dv">11</span>,
        <span class="st">&quot;led1&quot;</span>: <span class="dv">0</span>
   }]</code></pre>
<p>这里也涉及到了json数据结构的设计，可以将上面的结果设计为</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">  [{
      <span class="st">&quot;id&quot;</span>: <span class="dv">1</span>,
      <span class="st">&quot;temperature&quot;</span>: <span class="dv">10</span>,
      <span class="st">&quot;sensors&quot;</span>:[{
        <span class="st">&quot;sensor&quot;</span>:<span class="dv">22</span>,
        <span class="st">&quot;sensor&quot;</span>:<span class="dv">11</span>,
        }],
      <span class="st">&quot;led1&quot;</span>: <span class="dv">0</span>
  }]</code></pre>
<p>这种具有更好的可读性，然而在对于网速速度要求高的情况下，会表现得不好， 同时会造成额外的系统开销。对于这样一个需要不断读取数据的系统来说，采用 单层结构的json数据会更具有优势。</p>
<p>在设计这样一个接口的时候，需要考虑客户端可能需要获取全部的数据</p>
<pre class="sourceCode python"><code class="sourceCode python">    GET /status HTTP/<span class="fl">1.1</span>
    Host:localhost
    Cotent-Type:application/json;charset=UTF<span class="dv">-8</span></code></pre>
<p>设计好这样的接口有助于显示在系统的前台，而这也是无法在物联网系统中产生 统一协议的原因之一，复杂的接口无法用于简单功能的场景。</p>
<p>下面是一个简单的POST请求的示例，系统需要能接收POST请求，并将请求存储到数据库</p>
<pre class="sourceCode bash"><code class="sourceCode bash">    <span class="kw">POST</span> / HTTP/1.1
    <span class="kw">Host</span>:localhost
    <span class="kw">User-Agent</span>: Go 1.1 package http
    <span class="kw">Content-Length</span>: 45
    <span class="kw">Authorization</span>: 123456
    <span class="kw">Accept-Encoding</span>: gzip</code></pre>
<p>一个PUT动作但是我们更新资源，就好比是我们创建一个日志或者一个说说一样。 DELETE动作，便是删除动作了，而这也是一个物联网系统服务所需要的。</p>
<h2 id="系统前台设计">系统前台设计</h2>
<p>在对系统前台设计的时候，在考虑不同移动设备的兼容的同时，也需要保持一个 良好可用的结构。而系统在前台的主要功能是在于控制物体的状态、显示一些数 值的变化，控制物体状态的关键在于如何将数据由前台POST到后台，在网页端可 以用POST，而在移动端则可以用JSON API。</p>
<h3 id="ajax">Ajax</h3>
<ul>
<li>AJAX : Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）。</li>
<li>AJAX 不是新的编程语言，而是一种使用现有标准的新方法。</li>
<li>AJAX 是与服务器交换数据并更新部分网页的艺术，在不重新加载整个页面的情况下。</li>
</ul>
<p>剥离后的Ajax部分代码如下所示，主要用的是 jQuery 框架的 getJSON 来实现的</p>
<p>begin data:=get_data(url) if data.get_success temperature:=data.push(temperature)</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/edit.png" title="控制界面" alt="控制界面" /><p class="caption">控制界面</p>
</div>
<p>当按下Change Status按钮时，系统发生了如下变化</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/getpost.png" title="GET POST数据" alt="GET POST数据" /><p class="caption">GET POST数据</p>
</div>
<p>系统会先向服务器发送数据，也就是POST请求，在请求结束后，系统将会刷新页面，也就是GET请求。</p>
<p>系统会不断从后台获取数据结果，如下所示</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/request.png" title="后台获取数据" alt="后台获取数据" /><p class="caption">后台获取数据</p>
</div>
<p>在Javascript语言中有函数库可以直接用于获取后台数据——getJSON，可以从指定的URL中获取结果。</p>
<ul>
<li>url 用于提供 json 数据的地址页</li>
<li>data(Optional) 用于传送到服务器的键值对</li>
<li>callback(Optional) 回调函数，json 数据请求成功后的处理函数</li>
</ul>
<pre class="sourceCode javascript"><code class="sourceCode javascript">    <span class="kw">var</span> dataLength = [];
    <span class="kw">function</span> <span class="fu">drawTemp</span>() {
        <span class="kw">var</span> zero = [];
        <span class="ot">$</span>.<span class="fu">getJSON</span>(<span class="st">&#39;/athome/&#39;</span>, <span class="kw">function</span>(json) {
            <span class="kw">var</span> items = [];
            <span class="ot">dataLength</span>.<span class="fu">push</span>(<span class="ot">json</span>.<span class="fu">length</span>);
            <span class="ot">$</span>.<span class="fu">each</span>(json, <span class="kw">function</span>(key, val) {
                <span class="ot">zero</span>.<span class="fu">push</span>(<span class="ot">val</span>.<span class="fu">temperature</span>);
            });
    };</code></pre>
<p>实际上，上面的程序只是从 /athome/ 下面获取数据，再将数据堆到数组里面，再 把这部分放到图形中。</p>
<h3 id="highcharts">Highcharts</h3>
<p>Highcharts有以下的特点</p>
<ul>
<li>兼容性：兼容当今所有的浏览器，包括 iPhone、IE 和火狐等等；</li>
<li>对个人用户完全免费；</li>
<li>纯JS，无BS；</li>
<li>支持大部分的图表类型：直线图，曲线图、区域图、区域曲线图、柱状图、饼装图、散布图；</li>
<li>跨语言：不管是 PHP、Asp.net 还是 Java 都可以使用，它只需要三个文件：一个是Highcharts 的核心文件 highcharts.js，还有 a canvas emulator for IE 和 Jquery类库或者 MooTools 类库；</li>
<li>提示功能：鼠标移动到图表的某一点上有提示信息；</li>
<li>放大功能：选中图表部分放大，近距离观察图表；</li>
<li>易用性：无需要特殊的开发技能，只需要设置一下选项就可以制作适合自己的图表；</li>
<li>时间轴：可以精确到毫秒;</li>
</ul>
<p>在这里只需将需要处理的数据存储到数组中，便可以将其渲染成为图形，下面的温度走势图便是基于Highcharts的结果</p>
<div class="figure">
<img src="https://raw.githubusercontent.com/gmszone/thesis/master/dot/chart.png" title="温度走势图" alt="chart" /><p class="caption">chart</p>
</div>
<h2 id="系统后台设计">系统后台设计</h2>
<h3 id="数据库设计">数据库设计</h3>
<p>系统使用Laravel框架作为系统底层，需要配置其运行环境<a href="#fn12" class="footnoteRef" id="fnref12"><sup>12</sup></a>，创建数 据库<a href="#fn13" class="footnoteRef" id="fnref13"><sup>13</sup></a>，对应于上面生成的最后的JSON数据，创建对应的数据库:</p>
<p>系统数据库结构如下所示</p>
<table>
<thead>
<tr class="header">
<th align="left">表名</th>
<th align="left">数据类型</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id</td>
<td align="left">整数</td>
<td align="left">ID</td>
</tr>
<tr class="even">
<td align="left">temperature</td>
<td align="left">浮点数</td>
<td align="left">温度</td>
</tr>
<tr class="odd">
<td align="left">sensors1</td>
<td align="left">浮点数</td>
<td align="left">传感器1</td>
</tr>
<tr class="even">
<td align="left">sensors2</td>
<td align="left">浮点数</td>
<td align="left">传感器2</td>
</tr>
<tr class="odd">
<td align="left">led1</td>
<td align="left">布尔型</td>
<td align="left">led状态</td>
</tr>
</tbody>
</table>
<p>对应于数据库，其相应的php代码如下所示</p>
<pre class="sourceCode php"><code class="sourceCode php">        <span class="kw">public</span> <span class="kw">function</span> up<span class="ot">()</span>
        {
            Schema::create<span class="ot">(</span><span class="st">&#39;athomes&#39;</span><span class="ot">,</span> <span class="kw">function</span><span class="ot">(</span>Blueprint <span class="kw">$table</span><span class="ot">)</span>
            {
                <span class="kw">$table</span>---&gt;increments<span class="ot">(</span><span class="st">&#39;id&#39;</span><span class="ot">);</span>
                <span class="kw">$table</span>-&gt;float<span class="ot">(</span><span class="st">&#39;temperature&#39;</span><span class="ot">);</span>
                <span class="kw">$table</span>-&gt;float<span class="ot">(</span><span class="st">&#39;sensors1&#39;</span><span class="ot">);</span>
                <span class="kw">$table</span>-&gt;float<span class="ot">(</span><span class="st">&#39;sensors2&#39;</span><span class="ot">);</span>
                <span class="kw">$table</span>-&gt;boolean<span class="ot">(</span><span class="st">&#39;led1&#39;</span><span class="ot">);</span>
                <span class="kw">$table</span>-&gt;timestamps<span class="ot">();</span>
            }<span class="ot">);</span>
        }</code></pre>
<p>当POST数据的时候，便是将数据存往数据库，而GET的时候则是从数据库中拿出 数据再渲染给浏览器，GET、PUT、DELETE、POST便是对就于数据库的Create、Refresh、Update、Delete</p>
<p>系统使用MySQL作为数据库，开始的时候需要创建数据库，在数据库中执行</p>
<pre><code>CREATE DATABASE IF NOT EXISTS iot default charset utf8 COLLATE utf8_general_ci;</code></pre>
<p>用于创建一个athomes数据库，同时将PHP与数据库配置好</p>
<pre class="sourceCode php"><code class="sourceCode php"><span class="st">&#39;mysql&#39;</span> =&gt; <span class="fu">array</span><span class="ot">(</span>
  <span class="st">&#39;driver&#39;</span> =&gt; <span class="st">&#39;mysql&#39;</span><span class="ot">,</span>
  <span class="st">&#39;host&#39;</span> =&gt; <span class="st">&#39;localhost&#39;</span><span class="ot">,</span>
  <span class="st">&#39;database&#39;</span> =&gt; <span class="st">&#39;iot&#39;</span><span class="ot">,</span>
  <span class="st">&#39;username&#39;</span> =&gt; <span class="st">&#39;root&#39;</span><span class="ot">,</span>
  <span class="st">&#39;password&#39;</span> =&gt; <span class="st">&#39; &#39;</span><span class="ot">,</span>
  <span class="st">&#39;charset&#39;</span> =&gt; <span class="st">&#39;utf8&#39;</span><span class="ot">,</span>
  <span class="st">&#39;collation&#39;</span> =&gt; <span class="st">&#39;utf8_unicode_ci&#39;</span><span class="ot">,</span>
  <span class="st">&#39;prefix&#39;</span> =&gt; <span class="st">&#39;&#39;</span><span class="ot">,</span>
<span class="ot">)</span></code></pre>
<p>当用户在前台创建一个数据后，可以在MySQL的后台查看:</p>
<table>
<thead>
<tr class="header">
<th align="left">id</th>
<th align="left">temperature</th>
<th align="left">sensors1</th>
<th align="left">sensors2</th>
<th align="left">led1</th>
<th align="left">created_at</th>
<th align="left">updated_at</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">19.80</td>
<td align="left">22.20</td>
<td align="left">7.50</td>
<td align="left">0</td>
<td align="left">2013-12-31 07:03:59</td>
<td align="left">2013-12-31 07:03:59</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">18.80</td>
<td align="left">22.00</td>
<td align="left">7.60</td>
<td align="left">0</td>
<td align="left">2013-12-31 07:03:59</td>
<td align="left">2013-12-31 07:03:59</td>
</tr>
</tbody>
</table>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>全称单片微型计算机（英语：Single-Chip Microcomputer）<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Representational State Transfer<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>JavaScript Object Notation<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>包括C, C++, C#, Java, JavaScript, Perl, Python等<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>eXtensible Markup Language，简称: XML<a href="#fnref5">↩</a></p></li>
<li id="fn6"><p>PHP：Hypertext Preprocessor，即超文本预处理器<a href="#fnref6">↩</a></p></li>
<li id="fn7"><p>Asynchronous JavaScript and XML（异步JavaScript和XML)<a href="#fnref7">↩</a></p></li>
<li id="fn8"><p>在Windows系统中需要先安装pip，再安装pyserial。<a href="#fnref8">↩</a></p></li>
<li id="fn9"><p>指在*nix系统的终端中执行的命令。<a href="#fnref9">↩</a></p></li>
<li id="fn10"><p>在Windows系统上，只需要将/dev/ttyACM0改为对应的com口。 [getjson]: https://raw.githubusercontent.com/gmszone/thesis/master/dot/getjson.png “python返回json数据” [python返回json数据][getjson]<a href="#fnref10">↩</a></p></li>
<li id="fn11"><p>在本地进行web开发时，浏览器可以识别localhost，配置好Hosts时相当于127.0.0.1。<a href="#fnref11">↩</a></p></li>
<li id="fn12"><p>这里用的是Linux+Nginx+MySQL+PHP。<a href="#fnref12">↩</a></p></li>
<li id="fn13"><p>创建数据的代码:CREATE DATABASE IF NOT EXISTS bbs default charset utf8 COLLATE utf8_general_ci;<a href="#fnref13">↩</a></p></li>
</ol>
</div>
</body>
</html>
