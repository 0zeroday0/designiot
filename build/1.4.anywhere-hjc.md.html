<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="css/vendor.css" type="text/css" />
</head>
<body>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:wb="http://open.weibo.com/wb" >
	<head>
		<title>一步步搭建物联网系统(教你设计物联网系统)</title>
		<meta name="keywords" content="设计物联网系统,物联网系统设计">
		<meta name="description" content="一份关于如何设计物联网系统的文档">
		<link rel="stylesheet" href="../css/vendor.css" />
	</head>
	<body class="container inner wrap">
		<h1>一步步搭建物联网系统(教你设计物联网系统)</h1>
	</body>
</html>
<div id="TOC">
<ul>
<li><a href="#无处不在的三剑客"><span class="toc-section-number">1</span> 无处不在的三剑客</a><ul>
<li><a href="#hellogeek"><span class="toc-section-number">1.1</span> Hello,Geek</a></li>
<li><a href="#从源码学习"><span class="toc-section-number">1.2</span> 从源码学习</a></li>
<li><a href="#浏览器渲染过程"><span class="toc-section-number">1.3</span> 浏览器渲染过程</a><ul>
<li><a href="#html"><span class="toc-section-number">1.3.1</span> HTML</a></li>
</ul></li>
<li><a href="#dom树形结构图"><span class="toc-section-number">1.4</span> DOM树形结构图</a><ul>
<li><a href="#javascript"><span class="toc-section-number">1.4.1</span> javascript</a></li>
<li><a href="#css"><span class="toc-section-number">1.4.2</span> CSS</a></li>
</ul></li>
<li><a href="#css盒模型图"><span class="toc-section-number">1.5</span> CSS盒模型图</a></li>
<li><a href="#笔记"><span class="toc-section-number">1.6</span> 笔记</a></li>
</ul></li>
</ul>
</div>
<h1 id="无处不在的三剑客"><span class="header-section-number">1</span> 无处不在的三剑客</h1>
<p>这时我们终于了解了我们的三剑客，他们也就这么可以结合到一起了，HTML+Javascript+CSS是这一切的基础。而我们用到的其他语言如PHP、Python、Ruby等等到最后都会变成上面的结果，当然还有Coffeescript之类的语言都是以此为基础，这才是我们需要的知识。</p>
<h2 id="hellogeek"><span class="header-section-number">1.1</span> Hello,Geek</h2>
<p>有了一些些基础之后，我们终于能试着去写一些程序了。也是时候去创建一个像样的东西，或许你在一些界面设计方面的书籍看过类似的东西，可能我写得也没有那些内容好，只是这些都是一些过程。过去我们都是一点点慢慢过来的，只是现在我们也是如此，技术上的一些东西，事实上大家都是知道的。就好比我们都觉得我们可以开个超市，但是如果让我们去开超市的话，我们并不一定能赚钱。</p>
<p>学习编程的目的可能不在于我们能找到一份工作，那只是在编程之外的东西，虽然确实也是很确定的。但是除此之处，有些东西也是很重要的。</p>
<p>过去总是不理解为什么会一些人会不厌其烦地去回答别人的问题，有时候可能会想是一种能力越大责任越大的感觉，但是有时候在写一些博客或者回答别人的问题的时候我们又重新思考了这些问题，又重新学习了这些技能。所以这里可能说的不是关于编程的东西而是一些编程以外的东西，关于学习或者学习以外的东西。</p>
<h2 id="从源码学习"><span class="header-section-number">1.2</span> 从源码学习</h2>
<p>过去总觉得学了一种语言的语法便算是学会了一种语言，直到有一天接触运用该语言的项目的时候，虽然也会写上几行代码，但是却不像这种语言的风格。于是这也是这一篇的意义所在了：</p>
<h2 id="浏览器渲染过程"><span class="header-section-number">1.3</span> 浏览器渲染过程</h2>
<p>基本的渲染引擎的过程如下图所示:</p>
<div class="figure">
<img src="./images/flow.png" alt="flow" />
<p class="caption">flow</p>
</div>
<ul>
<li>解析HTML去构建DOM树</li>
<li>渲染树形结构</li>
<li>生成渲染的树形图布局</li>
<li>绘制树形图</li>
</ul>
<p>对于Webkit浏览器来说，他的过程如下所示:</p>
<div class="figure">
<img src="./images/webkitflow.png" alt="webkitflow" />
<p class="caption">webkitflow</p>
</div>
<h3 id="html"><span class="header-section-number">1.3.1</span> HTML</h3>
<p>写好HTML的一个要点在于读别人写的代码，这只是一方面，我们所说的HTML方面的内容可能不够多，原因有很多，很多东西都需要在实战中去解决。读万卷书和行万里路，分不清哪个有重要的意义，但是如果可以同时做好两个的话，成长会更快的。</p>
<p>写好HTML应该会有下面的要点</p>
<ul>
<li>了解标准及遵守绝大多数标准</li>
<li>注重可读性，从ID及CLASS的命名</li>
<li>关注SEO与代码的联系</li>
</ul>
<p>或许在这方面我也算不上很了解，不过按笔者的经验来说，大致就是如此。</p>
<p>多数情况下我们的HTML是类似于下面这样子的</p>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;col-md-3 right&quot;</span><span class="kw">&gt;</span>
    {% nevercache %}
    {% include &quot;includes/user_panel.html&quot; %}
    {% endnevercache %}
    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;panel panel-default&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;panel-body&quot;</span><span class="kw">&gt;</span>
    {% block right_panel %}
    {% ifinstalled mezzanine.twitter %}
    {% include &quot;twitter/tweets.html&quot; %}
    {% endifinstalled %}
    {% endblock %}
    <span class="kw">&lt;/div&gt;</span>
    <span class="kw">&lt;/div&gt;</span>
<span class="kw">&lt;/div&gt;</span></code></pre></div>
<p>换句话说HTML只是基础，而不是日常用到的。我们的HTML是由template生成的，我们可以借助于mustache.js又或者是angluarjs之类的js库来生成最后的HTML，所以这里只是一个开始。</p>
<p>还需要了解的一部分就是HTML的另外一个重要的部分，DOM树形结构</p>
<h2 id="dom树形结构图"><span class="header-section-number">1.4</span> DOM树形结构图</h2>
<blockquote>
<p>DOM是文档对象化模型（Document Object Model）的简称。DOM Tree是指通过DOM将HTML页面进行解析，并生成的HTML tree树状结构和对应访问方法。</p>
</blockquote>
<div class="figure">
<img src="./images/dom_tree.jpg" alt="DOM Tree" />
<p class="caption">DOM Tree</p>
</div>
<h3 id="javascript"><span class="header-section-number">1.4.1</span> javascript</h3>
<p>这里以未压缩的jQuery源码和zepto.js作一个小小的比较，zepto.js是兼容jQuery的，因此我们举几个有意思的函数作一简单的比较，关于源码可以在官网上下载到。</p>
<p>在zepto.js下面判断一个值是否是函数的方面如下，</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">isFunction</span>(value) <span class="op">{</span> <span class="cf">return</span> <span class="at">type</span>(value) <span class="op">==</span> <span class="st">&quot;function&quot;</span> <span class="op">}</span></code></pre></div>
<p>而在jQuery下面则是这样的</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">isFunction<span class="op">:</span> <span class="kw">function</span>( obj ) <span class="op">{</span>
    <span class="cf">return</span> <span class="va">jQuery</span>.<span class="at">type</span>(obj) <span class="op">===</span> <span class="st">&quot;function&quot;</span><span class="op">;</span>
<span class="op">}</span></code></pre></div>
<p>而他们的用法是一样的，都是</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">$</span>.<span class="at">isFunction</span>()<span class="op">;</span></code></pre></div>
<p>jQuery的作法是将诸如isFunction,isArray这些函数打包到jQuery.extend中，而zepto.js的也是这样的，只不过多了一行</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">$</span>.<span class="at">isFunction</span> <span class="op">=</span> isFunction</code></pre></div>
<p>遗憾的是我也没去了解过为什么，之前我也没有看过这些库的代码，所以这个问题就要交给读者去解决了。jQuery里面提供了函数式编程接口，不过jQuery更多的是构建于CSS选择器之上，对于DOM的操作比javascript自身提供的功能强大得多。如果我们的目的在于更好的编程，那么可能需要诸如Underscore.js之类的库。或许说打包自己常用的函数功能为一个库，诸如jQuery</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">isFunction</span>(value) <span class="op">{</span> <span class="cf">return</span> <span class="at">type</span>(value) <span class="op">==</span> <span class="st">&quot;function&quot;</span> <span class="op">}</span>
<span class="kw">function</span> <span class="at">isWindow</span>(obj)     <span class="op">{</span> <span class="cf">return</span> obj <span class="op">!=</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> obj <span class="op">==</span> <span class="va">obj</span>.<span class="at">window</span> <span class="op">}</span>
<span class="kw">function</span> <span class="at">isDocument</span>(obj)   <span class="op">{</span> <span class="cf">return</span> obj <span class="op">!=</span> <span class="kw">null</span> <span class="op">&amp;&amp;</span> <span class="va">obj</span>.<span class="at">nodeType</span> <span class="op">==</span> <span class="va">obj</span>.<span class="at">DOCUMENT_NODE</span> <span class="op">}</span>
<span class="kw">function</span> <span class="at">isObject</span>(obj)     <span class="op">{</span> <span class="cf">return</span> <span class="at">type</span>(obj) <span class="op">==</span> <span class="st">&quot;object&quot;</span> <span class="op">}</span></code></pre></div>
<p>我们需要去了解一些故事背后的原因，越来越害怕GUI的原因之一，在于不知道背后发生了什么，即使是开源的，我们也无法了解真正的背后发生什么了。对于不是这个工具、软件的用户来说，开源更多的意义可能在于我们可以添加新的功能，当然还有免费。如果没有所谓的危机感，以及认为自己一直在学习工具的话，可以试着去打包自己的函数，打包自己的库。</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> calc<span class="op">={</span>
    <span class="dt">add</span><span class="op">:</span> <span class="kw">function</span>(a<span class="op">,</span>b)<span class="op">{</span>
        <span class="cf">return</span> a<span class="op">+</span>b<span class="op">;</span>
    <span class="op">},</span>
    <span class="dt">sub</span><span class="op">:</span> <span class="kw">function</span>(a<span class="op">,</span>b)<span class="op">{</span>
        <span class="cf">return</span> a<span class="op">-</span>b<span class="op">;</span>
    <span class="op">},</span>
    <span class="dt">dif</span><span class="op">:</span> <span class="kw">function</span>(a<span class="op">,</span>b)<span class="op">{</span>
        <span class="cf">if</span>(a<span class="op">&gt;</span>b)<span class="op">{</span>
            <span class="cf">return</span> a<span class="op">;</span>
        <span class="op">}</span><span class="cf">else</span><span class="op">{</span>
            <span class="cf">return</span> b<span class="op">;</span>
        <span class="op">}</span>
    <span class="op">}</span>
<span class="op">}</span></code></pre></div>
<p>然后用诸如jslint测试一下代码。</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">./jsl</span> -conf jsl.default.conf
<span class="kw">JavaScript</span> Lint 0.3.0 (JavaScript-C 1.5 2004-09-24)
<span class="kw">Developed</span> by Matthias Miller (http://www.JavaScriptLint.com)

<span class="kw">app.js</span>
<span class="kw">/Users/fdhuang/beageek/chapter4/src</span>/<span class="kw">app.js</span>(15)<span class="kw">:</span> lint warning: missing semicolon
    }
<span class="kw">........</span>^


<span class="kw">0</span> error(s), <span class="kw">1</span> warning(s)</code></pre></div>
<p>于是我们需要在第15行添加一个分号。</p>
<p>最好的方法还是阅读别人的代码，而所谓的别人指的是一些相对较大的网站的，有比较完善的开发流程，代码质量也不会太差。而所谓的复杂的代码都是一步步构建上去的，罗马不是一天建成的。</p>
<p>有意思的是多数情况下，我们可能会用原型去开发我们的应用，而这也是我们需要去了解和掌握的地方，</p>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">function</span> <span class="at">Calc</span>()<span class="op">{</span>

<span class="op">}</span>
<span class="va">Calc</span>.<span class="va">prototype</span>.<span class="at">add</span><span class="op">=</span><span class="kw">function</span>(a<span class="op">,</span>b)<span class="op">{</span>
    <span class="cf">return</span> a<span class="op">+</span>b<span class="op">;</span>
<span class="op">};</span>
<span class="va">Calc</span>.<span class="va">prototype</span>.<span class="at">sub</span><span class="op">=</span><span class="kw">function</span>(a<span class="op">,</span>b)<span class="op">{</span>
    <span class="cf">return</span> a<span class="op">-</span>b<span class="op">;</span>
<span class="op">};</span></code></pre></div>
<p>我们似乎在这里展示了更多的Javascript的用法，但是这不是一好的关于Javascript的介绍，有一天我们还要用诸如qunit之类的工具去为我们的function写测试，这时就是一个更好的开始。</p>
<p>如果我们乐意的话，我们也可以构建一个类似于jQuery的框架，以用来学习。</p>
<p>作为一门编程语言来说，我们学得很普通，在某种意义上来说算不上是一种入门。但是如果我们可以在其他的好书在看到的内容，就没有必要在这里进行复述，目的在于一种学习习惯的养成。</p>
<h3 id="css"><span class="header-section-number">1.4.2</span> CSS</h3>
<p>CSS有时候很有趣，但是有时候有很多我们没有意识到的用法，这里以Bootstrap为例，这是一个不错的CSS库。最令人兴奋的是没有闭源的CSS，没有闭源的JS，这也就是前端好学习的地方所在了，不过这是一个开源的CSS库，虽然是这样叫的，但是称之为CSS库显然不合适。</p>
<div class="sourceCode"><pre class="sourceCode css"><code class="sourceCode css">a,
a<span class="dv">:visited</span> <span class="kw">{</span>
  <span class="kw">text-decoration:</span> <span class="dt">underline</span><span class="kw">;</span>
<span class="kw">}</span>
a<span class="ch">[href]</span><span class="dv">:after</span> <span class="kw">{</span>
  <span class="kw">content:</span> <span class="st">&quot; (&quot;</span> <span class="dt">attr(</span>href<span class="dt">)</span> <span class="st">&quot;)&quot;</span><span class="kw">;</span>
<span class="kw">}</span>
abbr<span class="ch">[title]</span><span class="dv">:after</span> <span class="kw">{</span>
  <span class="kw">content:</span> <span class="st">&quot; (&quot;</span> <span class="dt">attr(</span>title<span class="dt">)</span> <span class="st">&quot;)&quot;</span><span class="kw">;</span>
<span class="kw">}</span>
a<span class="ch">[href^=</span><span class="st">&quot;javascript:&quot;</span><span class="ch">]</span><span class="dv">:after</span>,
a<span class="ch">[href^=</span><span class="st">&quot;#&quot;</span><span class="ch">]</span><span class="dv">:after</span> <span class="kw">{</span>
  <span class="kw">content:</span> <span class="st">&quot;&quot;</span><span class="kw">;</span>
<span class="kw">}</span></code></pre></div>
<p>这里有一些有趣的，值得一讲的CSS用法。</p>
<ul>
<li>伪类选择器,如a:visited这样需要其他条件来对元素应用样式，用于已访问的链接。</li>
<li>属性选择器,如a[href]这样当a元素存在href这样的属性的时候来寻找应用元素。</li>
</ul>
<p>其他的还需要去好好了解的就是<strong>CSS的盒模型</strong>，作为CSS的基石之一。</p>
<h2 id="css盒模型图"><span class="header-section-number">1.5</span> CSS盒模型图</h2>
<p>(ps:以下内容来自于Mozilla Developer NetWorks)</p>
<p>CSS下这些矩形盒子由标准盒模型描述。这个模型描述元素内容占用空间。盒子有四个边界：外边距边界margin edge, 边框边界border edge, 内边距边界padding edge 与 内容边界content edge。</p>
<div class="figure">
<img src="./images/box-model.gif" alt="CSS Box Model" />
<p class="caption">CSS Box Model</p>
</div>
<p>内容区域content area 是真正包含元素内容的区域。位于内容边界的内部，它的大小为内容宽度 或 content-box宽及内容高度或content-box高。</p>
<p>如果 box-sizing 为默认值， width, min-width, max-width, height, min-height 与 max-height 控制内容大小。</p>
<p>内边距区域padding area 用内容及可能的边框之间的空白区域扩展内容区域。它位于内边距边界内部，通常有背景——颜色或图片（不透明图片盖住背景颜色）. 它的大小为 padding-box 宽与 padding-box 高。</p>
<p>内边距与内容边界之间的空间可以由 padding-top, padding-right, padding-bottom, padding-left 和简写属性 padding 控制。</p>
<p>边框区域border area 是包含边框的区域，扩展了内边距区域。它位于边框边界内部，大小为 border-box 宽和 border-box 高。由 border-width 及简写属性 border控制。</p>
<p>外边距区域margin area用空白区域扩展边框区域，以分开相邻的元素。它的大小为 margin-box 的高宽。</p>
<p>外边距区域大小由 margin-top, margin-right, margin-bottom, margin-left 及简写属性 margin 控制。</p>
<p>在 外边距合并 的情况下，由于盒之间共享外边距，外边距不容易弄清楚。</p>
<p>最后注意，对于行内非替换元素，其占用空间（行高）由 line-height 决定，即使有内边距与边框。</p>
<p>诸如</p>
<div class="sourceCode"><pre class="sourceCode css"><code class="sourceCode css">* <span class="kw">{</span>
  <span class="kw">margin:</span> <span class="dt">0px</span><span class="kw">;</span>
  <span class="kw">padding:</span> <span class="dt">0px</span><span class="kw">;</span>
  <span class="kw">font-family:</span> Helvetica<span class="kw">;</span>
<span class="kw">}</span></code></pre></div>
<p>这样的通用器用来进行全局选择的工具和我们用于抵消某个body对于子选择器的影响一样值得注意得多。</p>
<h2 id="笔记"><span class="header-section-number">1.6</span> 笔记</h2>
<p>写博客似乎是一个不错的好习惯，作为一个不是很优秀的写手。对于来说，有时候发现原来能教会别人对于自己的能力来说算是一种肯定。有些时候教会别人才算是自己学会的表现，总会在项目上的时候需要自己去复述工作的一个过程，我们需要整理好我们的思路才能带给别人更多的收获。我们的笔记上总会留下自己的学习的一些过程，有些时候我们想要的只是一点点的鼓励，有时是诸如评论一类，有时可能是诸如访问量。更多的可能是我们可以重新整理自己的知识，好好复习一下，以便于好好记住，写出来是一个好的过程。</p>
<p>无处不在的三剑客就这样到了这里，写得似乎很多也很少，但是还是没有做出来一个东西，于是我们朝着这样一个方向前进。</p>
</body>
</html>
